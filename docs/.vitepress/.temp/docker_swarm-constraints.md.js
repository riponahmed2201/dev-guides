import { ssrRenderAttrs, ssrRenderStyle } from "vue/server-renderer";
import { useSSRContext } from "vue";
import { _ as _export_sfc } from "./plugin-vue_export-helper.1tPrXgE0.js";
const __pageData = JSON.parse('{"title":"Swarm Service Constraints (সার্ভিস কনস্ট্রেইন্টস)","description":"","frontmatter":{},"headers":[],"relativePath":"docker/swarm-constraints.md","filePath":"docker/swarm-constraints.md"}');
const _sfc_main = { name: "docker/swarm-constraints.md" };
function _sfc_ssrRender(_ctx, _push, _parent, _attrs, $props, $setup, $data, $options) {
  _push(`<div${ssrRenderAttrs(_attrs)}><h1 id="swarm-service-constraints-সার্ভিস-কনস্ট্রেইন্টস" tabindex="-1">Swarm Service Constraints (সার্ভিস কনস্ট্রেইন্টস) <a class="header-anchor" href="#swarm-service-constraints-সার্ভিস-কনস্ট্রেইন্টস" aria-label="Permalink to &quot;Swarm Service Constraints (সার্ভিস কনস্ট্রেইন্টস)&quot;">​</a></h1><p>ডকার সোয়ার্ম ক্লাস্টারে যখন অনেকগুলো নোড থাকে, তখন ডিফল্টভাবে সোয়ার্ম সবচেয়ে কম লোড থাকা নোডে কন্টেইনার রান করে। তবে অনেক সময় আমাদের নির্দিষ্ট কোনো নোডে সার্ভিস রান করানো দরকার হয় (যেমন: শুধুমাত্র ডেটাবেস সার্ভারে বা বিশেষ হার্ডওয়্যার থাকা নোডে)। এই নোড সিলেকশন কন্ট্রোল করার জন্য &#39;Service Constraints&#39; ব্যবহার করা হয়।</p><h2 id="১-নোড-ডিক্লারেশন-এবং-লেবেল-node-labels" tabindex="-1">১. নোড ডিক্লারেশন এবং লেবেল (Node Labels) <a class="header-anchor" href="#১-নোড-ডিক্লারেশন-এবং-লেবেল-node-labels" aria-label="Permalink to &quot;১. নোড ডিক্লারেশন এবং লেবেল (Node Labels)&quot;">​</a></h2><p>কনস্ট্রেইন্ট ব্যবহার করার আগে নোডগুলোকে লেবেল দিয়ে চিহ্নিত করা ভালো।</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># একটি নোডে লেবেল যুক্ত করা</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> node</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> update</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> --label-add</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> type=compute</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> node-1</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> node</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> update</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> --label-add</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> storage=ssd</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> node-2</span></span></code></pre></div><hr><h2 id="২-প্লেসমেন্ট-কনস্ট্রেইন্ট-placement-constraints" tabindex="-1">২. প্লেসমেন্ট কনস্ট্রেইন্ট (Placement Constraints) <a class="header-anchor" href="#২-প্লেসমেন্ট-কনস্ট্রেইন্ট-placement-constraints" aria-label="Permalink to &quot;২. প্লেসমেন্ট কনস্ট্রেইন্ট (Placement Constraints)&quot;">​</a></h2><p>সার্ভিস তৈরি বা আপডেট করার সময় আপনি শর্ত জুড়ে দিতে পারেন যে সেটি কোন ধরণের নোডে চলবে।</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> service</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> create</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --name</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> db-service</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --constraint</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> &quot;node.labels.storage == ssd&quot;</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --constraint</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> &quot;node.role == worker&quot;</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">  mariadb</span></span></code></pre></div><h3 id="কমন-কনস্ট্রেইন্ট-উদাহরণ" tabindex="-1">কমন কনস্ট্রেইন্ট উদাহরণ: <a class="header-anchor" href="#কমন-কনস্ট্রেইন্ট-উদাহরণ" aria-label="Permalink to &quot;কমন কনস্ট্রেইন্ট উদাহরণ:&quot;">​</a></h3><ul><li><code>node.role == manager</code> (শুধুমাত্র ম্যানেজার নোডে চলবে)</li><li><code>node.role == worker</code> (শুধুমাত্র ওয়ার্কার নোডে চলবে)</li><li><code>node.id == &lt;NODE-ID&gt;</code> (একটি নির্দিষ্ট নোডে চলবে)</li><li><code>node.hostname == &lt;HOSTNAME&gt;</code> (নির্দিষ্ট হোস্টনেমে চলবে)</li><li><code>node.labels.&lt;KEY&gt; == &lt;VALUE&gt;</code> (কাস্টম লেবেল অনুযায়ী চলবে)</li></ul><hr><h2 id="৩-প্লেসমেন্ট-প্রেফারেন্স-এবং-স্প্রেড-spread-strategy" tabindex="-1">৩. প্লেসমেন্ট প্রেফারেন্স এবং স্প্রেড (Spread Strategy) <a class="header-anchor" href="#৩-প্লেসমেন্ট-প্রেফারেন্স-এবং-স্প্রেড-spread-strategy" aria-label="Permalink to &quot;৩. প্লেসমেন্ট প্রেফারেন্স এবং স্প্রেড (Spread Strategy)&quot;">​</a></h2><p>যদি আপনি চান সার্ভিসগুলো সমানভাবে বিভিন্ন ডেটাসেন্টার বা র‍্যাকে (Rack) ভাগ হয়ে থাকুক, তবে <code>placement-pref</code> ব্যবহার করা হয়।</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> service</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> create</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --name</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> web-app</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --replicas</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> 6</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --placement-pref</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> &quot;spread=node.labels.datacenter&quot;</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">  nginx</span></span></code></pre></div><p>এখানে যদি ২টি ডেটাসেন্টার থাকে, সোয়ার্ম চেষ্টা করবে ৩টি করে কন্টেইনার প্রতিটি ডেটাসেন্টারে রান করতে।</p><hr><h2 id="৪-রিসোর্স-কনস্ট্রেইন্ট-resource-constraints" tabindex="-1">৪. রিসোর্স কনস্ট্রেইন্ট (Resource Constraints) <a class="header-anchor" href="#৪-রিসোর্স-কনস্ট্রেইন্ট-resource-constraints" aria-label="Permalink to &quot;৪. রিসোর্স কনস্ট্রেইন্ট (Resource Constraints)&quot;">​</a></h2><p>সার্ভিস যাতে ক্লাস্টারের সব রিসোর্স খেয়ে না ফেলে, তার জন্য লিমিট এবং রিজার্ভেশন ব্যবহার করা হয়।</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> service</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> create</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --name</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> worker-app</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --limit-cpu</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> 0.5</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --limit-memory</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> 512m</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --reserve-cpu</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> 0.2</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">  --reserve-memory</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> 256m</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">  worker-image</span></span></code></pre></div><ul><li><strong>limit:</strong> সর্বোচ্চ কতটুকু ব্যবহার করতে পারবে।</li><li><strong>reserve:</strong> সোয়ার্ম নিশ্চিত করবে যে নোডে অন্তত এই পরিমাণ রিসোর্স খালি আছে।</li></ul><hr><h2 id="৫-কম্পোজ-স্ট্যাক-ফাইলে-ব্যবহার" tabindex="-1">৫. কম্পোজ/স্ট্যাক ফাইলে ব্যবহার <a class="header-anchor" href="#৫-কম্পোজ-স্ট্যাক-ফাইলে-ব্যবহার" aria-label="Permalink to &quot;৫. কম্পোজ/স্ট্যাক ফাইলে ব্যবহার&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">version</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&quot;3.8&quot;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">services</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">  web</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">    image</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">nginx</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">    deploy</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">      placement</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">        constraints</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">          - </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">node.role == worker</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">          - </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">node.labels.type == compute</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">        preferences</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">          - </span><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">spread</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">node.labels.datacenter</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">      resources</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">        limits</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">          cpus</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&quot;0.50&quot;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">          memory</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">512M</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">        reservations</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">          cpus</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&quot;0.25&quot;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">          memory</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">256M</span></span></code></pre></div><h2 id="৬-সুবিধা" tabindex="-1">৬. সুবিধা <a class="header-anchor" href="#৬-সুবিধা" aria-label="Permalink to &quot;৬. সুবিধা&quot;">​</a></h2><ul><li><strong>Hardware Optimization:</strong> বিশেষ কাজের জন্য বিশেষ ইক্যুইপমেন্ট (GPU, SSD) ব্যবহার করা যায়।</li><li><strong>Isolation:</strong> সেনসিটিভ সার্ভিসগুলোকে আলাদা নোডে রাখা যায়।</li><li><strong>High Availability:</strong> স্প্রেড স্ট্র্যাটেজি ব্যবহারের ফলে একটি পুরো র‍্যাক বা ডেটাসেন্টার ডাউন হলেও সার্ভিস সচল থাকে।</li></ul></div>`);
}
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("docker/swarm-constraints.md");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const swarmConstraints = /* @__PURE__ */ _export_sfc(_sfc_main, [["ssrRender", _sfc_ssrRender]]);
export {
  __pageData,
  swarmConstraints as default
};
