import { ssrRenderAttrs, ssrRenderAttr, ssrRenderStyle } from "vue/server-renderer";
import { useSSRContext } from "vue";
import { _ as _export_sfc } from "./plugin-vue_export-helper.1tPrXgE0.js";
const _imports_0 = "/dev-guides/assets/youtube-architecture-generated.Ded5capC.png";
const __pageData = JSON.parse('{"title":"Designing YouTube (Netflix/Twitch Similar)","description":"","frontmatter":{},"headers":[],"relativePath":"system-design/step-12-practice/youtube.md","filePath":"system-design/step-12-practice/youtube.md"}');
const _sfc_main = { name: "system-design/step-12-practice/youtube.md" };
function _sfc_ssrRender(_ctx, _push, _parent, _attrs, $props, $setup, $data, $options) {
  _push(`<div${ssrRenderAttrs(_attrs)}><h1 id="designing-youtube-netflix-twitch-similar" tabindex="-1">Designing YouTube (Netflix/Twitch Similar) <a class="header-anchor" href="#designing-youtube-netflix-twitch-similar" aria-label="Permalink to &quot;Designing YouTube (Netflix/Twitch Similar)&quot;">​</a></h1><p>সিস্টেম ডিজাইন ইন্টারভিউতে &quot;YouTube&quot; বা &quot;Netflix&quot; ডিজাইন করতে বলা একটি ক্লাসিক প্রশ্ন। এটি একটি <strong>Heavy Read &amp; Heavy Write</strong> সিস্টেম, যেখানে প্রচুর স্টোরেজ এবং ব্যান্ডউইথ প্রয়োজন।</p><p>এই গাইডে আমরা একদম শুরু থেকে শেষ পর্যন্ত একটি স্কেলেবল ভিডিও স্ট্রিমিং প্লাটফর্ম ডিজাইন করব।</p><h2 id="_1-requirements-রিকয়রমেন্টস" tabindex="-1">1. Requirements (রিকয়রমেন্টস) <a class="header-anchor" href="#_1-requirements-রিকয়রমেন্টস" aria-label="Permalink to &quot;1. Requirements (রিকয়রমেন্টস)&quot;">​</a></h2><p>সিস্টেম ডিজাইনের শুরুতে আমাদের রিকয়রমেন্টস ক্লিয়ার করে নিতে হবে।</p><h3 id="functional-requirements-ফিচারস" tabindex="-1">Functional Requirements (ফিচারস) <a class="header-anchor" href="#functional-requirements-ফিচারস" aria-label="Permalink to &quot;Functional Requirements (ফিচারস)&quot;">​</a></h3><ol><li><strong>Upload Video:</strong> ইউজাররা ভিডিও আপলোড করতে পারবে।</li><li><strong>View Video:</strong> ইউজাররা যেকোনো ডিভাইসে ভিডিও দেখতে পারবে।</li><li><strong>Search:</strong> ভিডিও টাইটেল দিয়ে সার্চ করা যাবে।</li><li><strong>Like/Comment:</strong> ভিডিওতে লাইক ও কমেন্ট করা যাবে।</li><li><strong>Analytics:</strong> ভিউ কাউন্ট দেখা যাবে।</li></ol><h3 id="non-functional-requirements-কোয়ালিটি" tabindex="-1">Non-Functional Requirements (কোয়ালিটি) <a class="header-anchor" href="#non-functional-requirements-কোয়ালিটি" aria-label="Permalink to &quot;Non-Functional Requirements (কোয়ালিটি)&quot;">​</a></h3><ol><li><strong>High Availability:</strong> সিস্টেম সবসময় চালু থাকতে হবে।</li><li><strong>High Reliability:</strong> আপলোড করা ভিডিও কখনো হারানো যাবে না।</li><li><strong>Low Latency:</strong> ভিডিও প্লে বাফার ছাড়া চলতে হবে (Real-time)।</li><li><strong>Scalability:</strong> মিলিয়ন ইউজার হ্যান্ডেল করতে হবে।</li></ol><hr><h2 id="_2-capacity-estimation-ক্যাপাসিটি-এস্টিমেশন" tabindex="-1">2. Capacity Estimation (ক্যাপাসিটি এস্টিমেশন) <a class="header-anchor" href="#_2-capacity-estimation-ক্যাপাসিটি-এস্টিমেশন" aria-label="Permalink to &quot;2. Capacity Estimation (ক্যাপাসিটি এস্টিমেশন)&quot;">​</a></h2><p>ডিজাইন করার আগে আমাদের সিস্টেমের স্কেল বোঝা জরুরি।</p><ul><li><strong>Total Users:</strong> 1 Billion (100 কোটি)</li><li><strong>Daily Active Users (DAU):</strong> 100 Million (10 কোটি)</li><li>ধরি, একজন ইউজার দিনে গড়ে ৫টি ভিডিও দেখে।</li></ul><h3 id="storage-estimation-স্টোরেজ" tabindex="-1">Storage Estimation (স্টোরেজ) <a class="header-anchor" href="#storage-estimation-স্টোরেজ" aria-label="Permalink to &quot;Storage Estimation (স্টোরেজ)&quot;">​</a></h3><ul><li>ধরি, প্রতিদিন <strong>500,000</strong> নতুন ভিডিও আপলোড হয়।</li><li>গড় ভিডিও সাইজ: <strong>300 MB</strong>।</li><li>Daily Storage Needed = 500,000 * 300 MB = <strong>150 TB / day</strong></li><li><strong>5 Years Storage:</strong> 150 TB _ 365 _ 5 ≈ <strong>275 PB (Petabytes)</strong></li></ul><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>বিশাল এই স্টোরেজ ম্যানেজ করার জন্য আমাদের <strong>Blob Storage (Amazon S3 / Azure Blob)</strong> ব্যবহার করতে হবে এবং পুরোনো ভিডিওগুলো <strong>Cold Storage (AWS Glacier)</strong>-এ মুভ করতে হবে খরচ কমানোর জন্য।</p></div><h3 id="bandwidth-estimation-ব্যান্ডউইথ" tabindex="-1">Bandwidth Estimation (ব্যান্ডউইথ) <a class="header-anchor" href="#bandwidth-estimation-ব্যান্ডউইথ" aria-label="Permalink to &quot;Bandwidth Estimation (ব্যান্ডউইথ)&quot;">​</a></h3><ul><li>ধরি, প্রতি সেকেন্ডে ১ মিলিয়ন ভিউ হচ্ছে।</li><li>প্রতি সেকেন্ডে কত ডেটা ট্রান্সফার হচ্ছে? যদি ১ এমবিপিএস স্পিড ধরি, তবে <strong>1 TB/sec</strong> ব্যান্ডউইথ লাগতে পারে। এর জন্য <strong>CDN (Content Delivery Network)</strong> মাস্ট।</li></ul><hr><h2 id="_3-high-level-design-hld" tabindex="-1">3. High-Level Design (HLD) <a class="header-anchor" href="#_3-high-level-design-hld" aria-label="Permalink to &quot;3. High-Level Design (HLD)&quot;">​</a></h2><p>পুরো সিস্টেমটিকে আমরা কয়েকটি বড় ভাগে ভাগ করতে পারি। নিচে একটি বেসিক আর্কিটেকচার ডায়াগ্রাম দেওয়া হলো:</p><p><img${ssrRenderAttr("src", _imports_0)} alt="YouTube System Architecture"></p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">flowchart TD</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    User[Clients (Mobile/Web)]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    LB[Load Balancer]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    WebServer[API Servers]</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    subgraph Services</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        Auth[Auth Service]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        Upload[Upload Service]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        Stream[Streaming Service]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        Search[Search Service]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    end</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    subgraph StorageLayer</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        DB[(Metadata DB - MySQL)]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        Blob[(Video Storage - S3)]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        Cache[(Redis Cache)]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    end</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    CDN[CDN (Cloudflare/Akamai)]</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    User --&gt;|1. HTTPS Request| LB</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    LB --&gt;|2. Forward| WebServer</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    WebServer --&gt;|3. Validate| Auth</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    WebServer --&gt;|4. Upload Process| Upload</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    WebServer --&gt;|5. Stream Request| Stream</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    WebServer --&gt;|6. Search Query| Search</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    Upload --&gt;|7. Store Raw Video| Blob</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    Upload --&gt;|8. Save Metadata| DB</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    Stream --&gt;|9. Get Stream URL| CDN</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    CDN --&gt;|10. Fetch if miss| Blob</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    Search --&gt;|11. Query Index| DB</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    WebServer -.-&gt;|Cache Hit/Miss| Cache</span></span></code></pre></div><h2 id="_4-detailed-component-design" tabindex="-1">4. Detailed Component Design <a class="header-anchor" href="#_4-detailed-component-design" aria-label="Permalink to &quot;4. Detailed Component Design&quot;">​</a></h2><p>এখন আমরা প্রতিটি কম্পোনেন্টকে বিস্তারিতভাবে ভাঙব।</p><h3 id="a-video-upload-flow-ভিডিও-আপলোড-ফ্লো" tabindex="-1">A. Video Upload Flow (ভিডিও আপলোড ফ্লো) <a class="header-anchor" href="#a-video-upload-flow-ভিডিও-আপলোড-ফ্লো" aria-label="Permalink to &quot;A. Video Upload Flow (ভিডিও আপলোড ফ্লো)&quot;">​</a></h3><p>ভিডিও আপলোড একটি ভারী প্রসেস। এটি সরাসরি সার্ভারে আপলোড না করে আমারা ক্লাউড স্টোরেজে পাঠাব।</p><ol><li>ক্লায়েন্ট সার্ভারের কাছে রিকোয়েস্ট করে: &quot;আমি একটি ভিডিও আপলোড করতে চাই&quot;।</li><li>সার্ভার অথেন্টিকেশন চেক করে এবং <strong>Amazon S3 Pre-signed URL</strong> রিটার্ন করে।</li><li>ক্লায়েন্ট সরাসরি সেই URL-এ ভিডিও আপলোড করে (সার্ভারের ওপর লোড পড়ে না)।</li><li>আপলোড শেষ হলে S3 একটি ইভেন্ট ট্রিগার করে এবং <strong>Message Queue (Kafka)</strong> তে মেসেজ পাঠায়—&quot;Transcoding Needed&quot;।</li></ol><p><strong>Transcoding/Encoding কেন দরকার?</strong> একটি ভিডিওর অরিজিনাল ফাইল (ধরুন .mov বা .avi) অনেক বড় সাইজের হয়। সব ডিভাইসে (Mobile, TV, Laptop) এটি প্লে নাও হতে পারে। তাই ভিডিওটিকে প্রসেস করে <code>.mp4</code> বা <code>.hls</code> ফরম্যাটে কনভার্ট করতে হয় এবং বিভিন্ন রেজোলিউশনে (360p, 720p, 1080p, 4K) ভেঙে ফেলতে হয়।</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">flowchart LR</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    User --&gt;|1. Request Upload URL| APIServer</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    APIServer --&gt;|2. Returns Pre-signed URL| User</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    User --&gt;|3. Upload Video| S3[Original Storage (S3)]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    S3 --&gt;|4. Trigger Event| Kafka[Message Queue]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    Kafka --&gt;|5. Consume Task| Encoder[Transcoding Service]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    Encoder --&gt;|6. Process Video| S3Final[Processed Storage]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    S3Final --&gt;|7. Update Status| DB[(Metadata DB)]</span></span></code></pre></div><h3 id="b-video-streaming-flow-ভিডিও-স্ট্রিমিং" tabindex="-1">B. Video Streaming Flow (ভিডিও স্ট্রিমিং) <a class="header-anchor" href="#b-video-streaming-flow-ভিডিও-স্ট্রিমিং" aria-label="Permalink to &quot;B. Video Streaming Flow (ভিডিও স্ট্রিমিং)&quot;">​</a></h3><p>আমরা কখনোই সরাসরি হার্ড ড্রাইভ বা S3 থেকে ভিডিও স্ট্রিম করব না। এতে ল্যাটেন্সি বাড়বে। আমরা <strong>CDN (Content Delivery Network)</strong> ব্যবহার করব।</p><ul><li><p><strong>Adaptive Bitrate Streaming (HLS/DASH):</strong> ইউজারের ইন্টারনেটের স্পিড অনুযায়ী ভিডিওর কোয়ালিটি অটোমেটিক চেঞ্জ হবে। নেট স্লো হলে 360p, ফাস্ট হলে 1080p চলবে। এর জন্য ভিডিওকে ছোট ছোট <strong>Chunk</strong> (৫-১০ সেকেন্ডের ক্লিপ) এ ভাগ করে রাখা হয়।</p></li><li><p><strong>Flow:</strong></p><ol><li>ইউজার ভিডিওতে ক্লিক করল।</li><li>সার্ভার ভিডিওর মেটাডেটা এবং স্ট্রিমিং URL (M3U8 ফাইল) দিল।</li><li>ভিডিও প্লেয়ার সেই URL থেকে সবচেয়ে কাছের <strong>CDN Edge Server</strong> থেকে ভিডিওর চাংক ডাউনলোড শুরু করল।</li></ol></li></ul><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">flowchart LR</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    User[User]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    Client[Video Player]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    API[API Server]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    DB[(Metadata DB)]</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    CDN[CDN Edge]</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    User --&gt;|1. Click Play| Client</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    Client --&gt;|2. Get Video Metadata| API</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    API -.-&gt;|3. Check Auth &amp; Path| DB</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    API --&gt;|4. Return CDN URL| Client</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    Client --&gt;|5. Request Video Chunks| CDN</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    CDN --&gt;|6. Stream Data| Client</span></span></code></pre></div><h3 id="c-database-design-ডেটাবেস-ডিজাইন" tabindex="-1">C. Database Design (ডেটাবেস ডিজাইন) <a class="header-anchor" href="#c-database-design-ডেটাবেস-ডিজাইন" aria-label="Permalink to &quot;C. Database Design (ডেটাবেস ডিজাইন)&quot;">​</a></h3><p>আমাদের দুই ধরনের ডেটা আছে:</p><ol><li><strong>Video Metadata:</strong> Title, Description, Uploader ID, Size.</li><li><strong>User Data:</strong> Name, Email, Password.</li><li><strong>Videos:</strong> এটি ডেটাবেসে নয়, <strong>Object Storage (S3)</strong> এ থাকবে।</li></ol><p><strong>SQL নাকি NoSQL?</strong></p><ul><li><strong>Metadata (Users, Video Info):</strong> রিলেশনাল ডেটা ও স্ট্রাকচার্ড, তাই <strong>MySQL</strong> বা <strong>PostgreSQL</strong> ভালো। আমরা <strong>Sharding</strong> ব্যবহার করতে পারি (User ID বা Video ID দিয়ে) স্কেল করার জন্য।</li><li><strong>Comments/Likes:</strong> বিশাল পরিমাণের ডেটা এবং রিলেশনশিপ কম, তাই <strong>NoSQL (Cassandra বা MongoDB)</strong> ভালো হবে।</li></ul><p><strong>Entity Relationship (ER) Diagram:</strong></p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">erDiagram</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    USERS {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        UUID UserID PK</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        string Name</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        string Email</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    VIDEOS {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        UUID VideoID PK</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        UUID UserID FK</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        string Title</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        string S3Url</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        timestamp CreatedAt</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    }</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    COMMENTS {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        UUID CommentID PK</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        UUID VideoID FK</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        UUID UserID FK</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        string Content</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    }</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    USERS ||--o{ VIDEOS : uploads</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    USERS ||--o{ COMMENTS : writes</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    VIDEOS ||--o{ COMMENTS : contains</span></span></code></pre></div><p><strong>Schema Example (MySQL):</strong></p><p><strong>Videos Table:</strong></p><table tabindex="0"><thead><tr><th style="${ssrRenderStyle({ "text-align": "left" })}">Column</th><th style="${ssrRenderStyle({ "text-align": "left" })}">Type</th><th style="${ssrRenderStyle({ "text-align": "left" })}">Description</th></tr></thead><tbody><tr><td style="${ssrRenderStyle({ "text-align": "left" })}">VideoID</td><td style="${ssrRenderStyle({ "text-align": "left" })}">UUID</td><td style="${ssrRenderStyle({ "text-align": "left" })}">Primary Key (Sharding Key)</td></tr><tr><td style="${ssrRenderStyle({ "text-align": "left" })}">UserID</td><td style="${ssrRenderStyle({ "text-align": "left" })}">UUID</td><td style="${ssrRenderStyle({ "text-align": "left" })}">Owner</td></tr><tr><td style="${ssrRenderStyle({ "text-align": "left" })}">Title</td><td style="${ssrRenderStyle({ "text-align": "left" })}">VARCHAR</td><td style="${ssrRenderStyle({ "text-align": "left" })}"></td></tr><tr><td style="${ssrRenderStyle({ "text-align": "left" })}">S3Url</td><td style="${ssrRenderStyle({ "text-align": "left" })}">VARCHAR</td><td style="${ssrRenderStyle({ "text-align": "left" })}">Path to file</td></tr><tr><td style="${ssrRenderStyle({ "text-align": "left" })}">Thumbnail</td><td style="${ssrRenderStyle({ "text-align": "left" })}">VARCHAR</td><td style="${ssrRenderStyle({ "text-align": "left" })}">Path to image</td></tr><tr><td style="${ssrRenderStyle({ "text-align": "left" })}">CreatedAt</td><td style="${ssrRenderStyle({ "text-align": "left" })}">Timestamp</td><td style="${ssrRenderStyle({ "text-align": "left" })}"></td></tr></tbody></table><h2 id="_5-scalability-optimization" tabindex="-1">5. Scalability &amp; Optimization <a class="header-anchor" href="#_5-scalability-optimization" aria-label="Permalink to &quot;5. Scalability &amp; Optimization&quot;">​</a></h2><p>সিস্টেমটি স্কেল করার জন্য আমরা কী কী টেকনিক ব্যবহার করব?</p><ol><li><p><strong>Database Sharding:</strong> হাজার কোটি ভিডিওর মেটাডেটা একটি সার্ভারে রাখা অসম্ভব। আমরা <code>VideoID</code> এর ওপর ভিত্তি করে ডেটাবেস শার্ডিং করতে পারি।</p></li><li><p><strong>Caching (Redis/Memcached):</strong> কিছু ভিডিও খুব পপুলার হয় (Viral Videos)। এগুলোর মেটাডেটা বারবার ডেটাবেস থেকে না এনে <strong>Cache</strong>-এ রাখব। এতে রেসপন্স টাইম মিলি-সেকেন্ডে নেমে আসবে।</p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p><strong>Pareto Principle (80/20 Rule):</strong> ২০% পপুলার ভিডিও ৮০% ট্রাফিক জেনারেট করে। তাই শুধু পপুলার ভিডিওগুলো ক্যাশ করলেই বিশাল লাভ হবে।</p></div></li><li><p><strong>CDN Optimization:</strong> সব ভিডিও সব CDN-এ রাখার দরকার নেই। পপুলার ভিডিওগুলো সব রিজিয়নের CDN-এ রেপ্লিকেট করা হবে। কম পপুলার ভিডিওগুলো মেইন সার্ভার থেকে অন-ডিমান্ড আনা হবে।</p></li><li><p><strong>Dedupucation:</strong> একই ভিডিও বারবার আপলোড হলে আমরা ডুপ্লিকেট চেক (MD5 Checksum) করে স্টোরেজ বাঁচাতে পারি।</p></li></ol><h2 id="_6-summary" tabindex="-1">6. Summary <a class="header-anchor" href="#_6-summary" aria-label="Permalink to &quot;6. Summary&quot;">​</a></h2><ul><li><strong>Upload:</strong> Pre-signed URL -&gt; S3 -&gt; Kafka -&gt; Workers -&gt; Processed S3.</li><li><strong>Stream:</strong> CDN -&gt; Adaptive Bitrate (HLS) -&gt; Video Player.</li><li><strong>Database:</strong> SQL for Metadata (Sharded), NoSQL for Comments.</li><li><strong>Performance:</strong> Caching for Viral Content, CDN for Global Reach.</li></ul><p>এই ডিজাইনটি ফলো করলে আপনি ইন্টারভিউতে একটি স্ট্রং এবং স্কেলেবল আর্কিটেকচার প্রেজেন্ট করতে পারবেন।</p></div>`);
}
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("system-design/step-12-practice/youtube.md");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const youtube = /* @__PURE__ */ _export_sfc(_sfc_main, [["ssrRender", _sfc_ssrRender]]);
export {
  __pageData,
  youtube as default
};
