import { ssrRenderAttrs, ssrRenderStyle } from "vue/server-renderer";
import { useSSRContext } from "vue";
import { _ as _export_sfc } from "./plugin-vue_export-helper.1tPrXgE0.js";
const __pageData = JSON.parse('{"title":"Middleware","description":"","frontmatter":{},"headers":[],"relativePath":"django/middleware.md","filePath":"django/middleware.md"}');
const _sfc_main = { name: "django/middleware.md" };
function _sfc_ssrRender(_ctx, _push, _parent, _attrs, $props, $setup, $data, $options) {
  _push(`<div${ssrRenderAttrs(_attrs)}><h1 id="middleware" tabindex="-1">Middleware <a class="header-anchor" href="#middleware" aria-label="Permalink to &quot;Middleware&quot;">​</a></h1><p>Django Middleware হলো একটি লাইটওয়েট, লো-লেভেল প্লাগইন সিস্টেম যা গ্লোবালি Django-এর ইনপুট এবং আউটপুট প্রসেস পরিবর্তন বা হ্যান্ডেল করতে ব্যবহৃত হয়।</p><p>সহজ কথায়, Middleware হলো এমন কিছু হুক (hooks) বা কোড যা প্রতিটি Request প্রসেস হওয়ার আগে এবং Response ক্লায়েন্টের কাছে যাওয়ার আগে রান হয়। প্রতিটি Middleware একটি নির্দিষ্ট কাজ করে, যেমন—User Authentication চেক করা, Session ম্যানেজ করা, বা Security এনশিওর করা।</p><h2 id="request-response-cycle" tabindex="-1">Request/Response Cycle <a class="header-anchor" href="#request-response-cycle" aria-label="Permalink to &quot;Request/Response Cycle&quot;">​</a></h2><p>Django তে যখন একটি Request আসে এবং Response ফেরত যায়, তখন এটি Middleware এর মধ্য দিয়ে প্রবাহিত হয়।</p><ol><li><strong>Request Phase:</strong> ক্লায়েন্ট থেকে Request আসার পর সেটি একে একে সব Middleware এর <code>process_request</code> এবং <code>process_view</code> মেথড পার হয়ে View এ পৌঁছায়।</li><li><strong>View Phase:</strong> View ফাংশন বা ক্লাস Request প্রসেস করে Response তৈরি করে।</li><li><strong>Response Phase:</strong> View থেকে Response তৈরি হওয়ার পর সেটি আবার উল্টো অর্ডারে সব Middleware এর <code>process_response</code> বা <code>process_exception</code> মেথড পার হয়ে ক্লায়েন্টের কাছে যায়।</li></ol><h2 id="built-in-middleware" tabindex="-1">Built-in Middleware <a class="header-anchor" href="#built-in-middleware" aria-label="Permalink to &quot;Built-in Middleware&quot;">​</a></h2><p>Django প্রোজেক্ট তৈরি করলে <code>settings.py</code> ফাইলে <code>MIDDLEWARE</code> লিস্টে ডিফল্ট কিছু Middleware থাকে। যেমন:</p><ul><li><strong><code>SecurityMiddleware</code></strong>: Request/Response এর সাইকেল এবং Security (SSL, XSS) হ্যান্ডেল করে।</li><li><strong><code>SessionMiddleware</code></strong>: সেশন ম্যানেজমেন্টের জন্য ব্যবহৃত হয়।</li><li><strong><code>CommonMiddleware</code></strong>: কিছু সাধারণ কাজ যেমন URL Rewrite বা User Agent চেক করে।</li><li><strong><code>CsrfViewMiddleware</code></strong>: Cross Site Request Forgery (CSRF) প্রোটেকশন দেয়।</li><li><strong><code>AuthenticationMiddleware</code></strong>: প্রতিটি Request এর সাথে User কে অ্যাসোসিয়েট করে।</li><li><strong><code>MessageMiddleware</code></strong>: ফ্লাশ ম্যাসেজ (Flash Messages) দেখানোর জন্য কাজে লাগে।</li><li><strong><code>XFrameOptionsMiddleware</code></strong>: Clickjacking প্রোটেকশনের জন্য ব্যবহৃত হয়।</li></ul><h2 id="custom-middleware" tabindex="-1">Custom Middleware <a class="header-anchor" href="#custom-middleware" aria-label="Permalink to &quot;Custom Middleware&quot;">​</a></h2><p>অনেক সময় আমাদের কাস্টম লজিক ইমপ্লিমেন্ট করার প্রয়োজন হয়, তখন আমরা Custom Middleware তৈরি করি। এটি একটি ক্লাস বা ফাংশন হতে পারে।</p><p><strong>ফাংশন বেসড কাস্টম মিডলওয়্যার:</strong></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">def</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}"> simple_middleware</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(get_response):</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">    # One-time configuration and initialization.</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">    def</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}"> middleware</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(request):</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">        # Code to be executed for each request before</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">        # the view (and later middleware) are called.</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">        print</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&quot;Before View Execution&quot;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">)</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        response </span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> get_response(request)</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">        # Code to be executed for each request/response after</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">        # the view is called.</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">        print</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&quot;After View Execution&quot;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">)</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">        return</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> response</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">    return</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> middleware</span></span></code></pre></div><p><strong>ক্লাস বেসড কাস্টম মিডলওয়্যার:</strong></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">class</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}"> SimpleMiddleware</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">:</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">    def</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> __init__</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(self, get_response):</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">        self</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">.get_response </span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> get_response</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">        # One-time configuration and initialization.</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">    def</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> __call__</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(self, request):</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">        # Code to be executed for each request before</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">        # the view (and later middleware) are called.</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">        print</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&quot;Before View Execution&quot;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">)</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">        response </span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> self</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">.get_response(request)</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">        # Code to be executed for each request/response after</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">        # the view is called.</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">        print</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&quot;After View Execution&quot;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">)</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">        return</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> response</span></span></code></pre></div><h3 id="middleware-hooks" tabindex="-1">Middleware Hooks <a class="header-anchor" href="#middleware-hooks" aria-label="Permalink to &quot;Middleware Hooks&quot;">​</a></h3><p>Custom Middleware এ আমরা স্পেসিফিক কিছু হুক ওভাররাইড করতে পারি (ক্লাস বেসড এপ্রোচে):</p><ol><li><p><strong><code>process_request(self, request)</code></strong>:</p><ul><li>View কল হওয়ার ঠিক আগে এটি কল হয়।</li><li>এখানে আপনি <code>None</code> রিটার্ন করলে ফ্লো কন্টিনিউ হবে, আর <code>HttpResponse</code> রিটার্ন করলে সরাসরি রেসপন্স চলে যাবে (View কল হবে না)।</li></ul></li><li><p><strong><code>process_view(self, request, view_func, view_args, view_kwargs)</code></strong>:</p><ul><li><code>process_request</code> এর পরে এবং ভিউ এক্সিকিউট হওয়ার ঠিক আগে এটি কল হয়।</li><li>ভিউ ফাংশন বা আর্গুমেন্ট মডিফাই করতে এটি ব্যবহার করা যায়।</li></ul></li><li><p><strong><code>process_exception(self, request, exception)</code></strong>:</p><ul><li>ভিউ যদি কোনো Exception রেইজ করে, তখন এটি কল হয়।</li><li>গ্লোবাল এরর হ্যান্ডলিং বা লগিং এর জন্য এটি চমৎকার জায়গা।</li></ul></li><li><p><strong><code>process_template_response(self, request, response)</code></strong>:</p><ul><li>ভিউ এক্সিকিউশনের পর যদি রেসপন্সটি <code>TemplateResponse</code> টাইপের হয়, তখন এটি কল হয়।</li></ul></li></ol><h2 id="middleware-ordering" tabindex="-1">Middleware Ordering <a class="header-anchor" href="#middleware-ordering" aria-label="Permalink to &quot;Middleware Ordering&quot;">​</a></h2><p><code>MIDDLEWARE</code> লিস্টে মিডলওয়্যারগুলোর <strong>অর্ডার বা ক্রম</strong> খুবই গুরুত্বপূর্ণ।</p><ul><li><strong>Request প্রক্রিয়াকরণের সময়:</strong> মিডলওয়্যারগুলো <strong>উপর থেকে নিচে (Top to Bottom)</strong> ক্রমে কাজ করে।</li><li><strong>Response প্রক্রিয়াকরণের সময়:</strong> মিডলওয়্যারগুলো <strong>নিচ থেকে উপরে (Bottom to Top)</strong> ক্রমে কাজ করে (পেঁয়াজের খোসার মতো)।</li></ul><p>উদাহরণস্বরূপ, <code>AuthenticationMiddleware</code> কাজ করার জন্য <code>SessionMiddleware</code> এর প্রয়োজন হয়, তাই <code>SessionMiddleware</code> কে অবশ্যই <code>AuthenticationMiddleware</code> এর <strong>উপরে</strong> রাখতে হবে।</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">MIDDLEWARE</span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}"> =</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> [</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">    &#39;django.middleware.security.SecurityMiddleware&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">    &#39;django.contrib.sessions.middleware.SessionMiddleware&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># আগে রান হবে</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">    &#39;django.middleware.common.CommonMiddleware&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">    &#39;django.middleware.csrf.CsrfViewMiddleware&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">    &#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># পরে রান হবে</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">    # ...</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">]</span></span></code></pre></div><p>ভুল অর্ডারিং এর কারণে অ্যাপ্লিকেশন ক্র্যাশ করতে পারে বা সিকিউরিটি ভালনারিবিলিটি তৈরি হতে পারে।</p></div>`);
}
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("django/middleware.md");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const middleware = /* @__PURE__ */ _export_sfc(_sfc_main, [["ssrRender", _sfc_ssrRender]]);
export {
  __pageData,
  middleware as default
};
