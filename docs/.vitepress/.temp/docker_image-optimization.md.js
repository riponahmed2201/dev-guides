import { ssrRenderAttrs, ssrRenderStyle } from "vue/server-renderer";
import { useSSRContext } from "vue";
import { _ as _export_sfc } from "./plugin-vue_export-helper.1tPrXgE0.js";
const __pageData = JSON.parse('{"title":"Docker Image Optimization ⚡","description":"","frontmatter":{},"headers":[],"relativePath":"docker/image-optimization.md","filePath":"docker/image-optimization.md"}');
const _sfc_main = { name: "docker/image-optimization.md" };
function _sfc_ssrRender(_ctx, _push, _parent, _attrs, $props, $setup, $data, $options) {
  _push(`<div${ssrRenderAttrs(_attrs)}><h1 id="docker-image-optimization-⚡" tabindex="-1">Docker Image Optimization ⚡ <a class="header-anchor" href="#docker-image-optimization-⚡" aria-label="Permalink to &quot;Docker Image Optimization ⚡&quot;">​</a></h1><p>ডকার ইমেজের সাইজ ছোট রাখা এবং বিল্ড প্রসেস দ্রুত করা প্রোডাকশন এনভায়রনমেন্টের জন্য অত্যন্ত গুরুত্বপূর্ণ। ছোট ইমেজ মানেই ফাস্ট ডিপ্লয়মেন্ট, কম স্টোরেজ খরচ এবং উন্নত সিকিউরিটি।</p><hr><h2 id="১-ছোট-বেস-ইমেজ-ব্যবহার-minimal-base-images" tabindex="-1">১. ছোট বেস ইমেজ ব্যবহার (Minimal Base Images) <a class="header-anchor" href="#১-ছোট-বেস-ইমেজ-ব্যবহার-minimal-base-images" aria-label="Permalink to &quot;১. ছোট বেস ইমেজ ব্যবহার (Minimal Base Images)&quot;">​</a></h2><p>ইমেজের সাইজ কমানোর প্রথম ধাপ হলো সঠিক বেস ইমেজ নির্বাচন করা।</p><ul><li><strong>Alpine Linux:</strong> এটি মাত্র ৫ মেগাবাইটের মতো সাইজ। বেশিরভাগ প্যাকেজের জন্য এটি আদর্শ।<div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">FROM</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> node:18-alpine</span></span></code></pre></div></li><li><strong>Distroless:</strong> এতে কোনো শেল (Shell) বা প্যাকেজ ম্যানেজার থাকে না, শুধুমাত্র আপনার অ্যাপ্লিকেশনের জন্য প্রয়োজনীয় ফাইলগুলো থাকে। এটি সিকিউরিটির জন্য সেরা।</li></ul><hr><h2 id="২-মাল্টি-স্টেজ-বিল্ড-multi-stage-builds" tabindex="-1">২. মাল্টি-স্টেজ বিল্ড (Multi-stage Builds) <a class="header-anchor" href="#২-মাল্টি-স্টেজ-বিল্ড-multi-stage-builds" aria-label="Permalink to &quot;২. মাল্টি-স্টেজ বিল্ড (Multi-stage Builds)&quot;">​</a></h2><p>আপনার বিল্ড টুলস (যেমন: Compilers, SDKs) এবং রানটাইম এনভায়রনমেন্ট আলাদা রাখুন। বিল্ড স্টেজে সবকিছু কম্পাইল করে শুধু ফাইনাল বাইনারি বা ফাইলগুলো রানটাইম স্টেজে কপি করুন।</p><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># Stage 1: Build</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">FROM</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> golang:1.21-alpine </span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">AS</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> builder</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">WORKDIR</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> /app</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">COPY</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> . .</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">RUN</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> go build -o main .</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># Stage 2: Final</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">FROM</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> alpine:latest</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">WORKDIR</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> /root/</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">COPY</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> --from=builder /app/main .</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">CMD</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> [</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&quot;./main&quot;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">]</span></span></code></pre></div><hr><h2 id="৩-লেয়ার-সংখ্যা-কমানো-এবং-কমান্ড-কম্বাইন-করা" tabindex="-1">৩. লেয়ার সংখ্যা কমানো এবং কমান্ড কম্বাইন করা <a class="header-anchor" href="#৩-লেয়ার-সংখ্যা-কমানো-এবং-কমান্ড-কম্বাইন-করা" aria-label="Permalink to &quot;৩. লেয়ার সংখ্যা কমানো এবং কমান্ড কম্বাইন করা&quot;">​</a></h2><p>প্রতিটি <code>RUN</code>, <code>COPY</code> নতুন লেয়ার যোগ করে। তাই একাধিক কমান্ডকে <code>&amp;&amp;</code> দিয়ে এক লাইনে লিখুন।</p><ul><li><strong>Bad:</strong><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">RUN</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> apt-get update</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">RUN</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> apt-get install -y git</span></span></code></pre></div></li><li><strong>Good:</strong><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">RUN</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> apt-get update &amp;&amp; apt-get install -y git &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span></code></pre></div></li></ul><hr><h2 id="৪-ইন্সট্রাকশনের-সঠিক-ক্রম-order-of-instructions" tabindex="-1">৪. ইন্সট্রাকশনের সঠিক ক্রম (Order of Instructions) <a class="header-anchor" href="#৪-ইন্সট্রাকশনের-সঠিক-ক্রম-order-of-instructions" aria-label="Permalink to &quot;৪. ইন্সট্রাকশনের সঠিক ক্রম (Order of Instructions)&quot;">​</a></h2><p>ডকার বিল্ড করার সময় লেয়ার ক্যাশিং ব্যবহার করে। যে ফাইলগুলো ঘনঘন পরিবর্তন হয় না (যেমন: <code>package.json</code>, <code>requirements.txt</code>), সেগুলো Dockerfile-এর উপরের দিকে রাখুন।</p><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">COPY</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> package.json .</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">RUN</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> npm install</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">COPY</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> . .</span></span></code></pre></div><hr><h2 id="৫-প্যাকেজ-ম্যানেজার-ক্যাশ-পরিষ্কার-করা" tabindex="-1">৫. প্যাকেজ ম্যানেজার ক্যাশ পরিষ্কার করা <a class="header-anchor" href="#৫-প্যাকেজ-ম্যানেজার-ক্যাশ-পরিষ্কার-করা" aria-label="Permalink to &quot;৫. প্যাকেজ ম্যানেজার ক্যাশ পরিষ্কার করা&quot;">​</a></h2><p>সফটওয়্যার ইন্সটল করার পর প্যাকেজ ম্যানেজারের টেম্পোরারি ফাইলগুলো মুছে দিন।</p><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">RUN</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> apt-get update &amp;&amp; apt-get install -y \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    curl \\</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span></code></pre></div><hr><h2 id="৬-স্পেসিফিক-ভার্সন-ব্যবহার-করা" tabindex="-1">৬. স্পেসিফিক ভার্সন ব্যবহার করা <a class="header-anchor" href="#৬-স্পেসিফিক-ভার্সন-ব্যবহার-করা" aria-label="Permalink to &quot;৬. স্পেসিফিক ভার্সন ব্যবহার করা&quot;">​</a></h2><p>ইমেজের স্থায়িত্ব এবং সিকিউরিটির জন্য সবসময় নির্দিষ্ট ট্যাগ বা ভার্সন ব্যবহার করুন। <code>latest</code> ট্যাগ এড়িয়ে চলুন।</p><hr><h2 id="৭-অপ্রয়োজনীয়-ফাইল-বাদ-দেওয়া" tabindex="-1">৭. অপ্রয়োজনীয় ফাইল বাদ দেওয়া <a class="header-anchor" href="#৭-অপ্রয়োজনীয়-ফাইল-বাদ-দেওয়া" aria-label="Permalink to &quot;৭. অপ্রয়োজনীয় ফাইল বাদ দেওয়া&quot;">​</a></h2><p><code>.dockerignore</code> ব্যবহার করে বিল্ড কন্টেক্সট থেকে অপ্রয়োজনীয় ফাইল (যেমন: <code>.git</code>, <code>node_modules</code>, <code>logs</code>) বাদ দিন।</p><hr><h2 id="৮-সিকিউরিটি-স্ক্যানিং-vulnerability-scanning" tabindex="-1">৮. সিকিউরিটি স্ক্যানিং (Vulnerability Scanning) <a class="header-anchor" href="#৮-সিকিউরিটি-স্ক্যানিং-vulnerability-scanning" aria-label="Permalink to &quot;৮. সিকিউরিটি স্ক্যানিং (Vulnerability Scanning)&quot;">​</a></h2><p>ইমেজ তৈরি করার পর সেটি স্ক্যান করা উচিত যাতে কোনো সিকিউরিটি হোল না থাকে। ডকার স্ক্যান বা ট্রিভি (Trivy) এর মতো টুল ব্যবহার করতে পারেন।</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">docker</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> scout</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> cves</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> my-image:latest</span></span></code></pre></div><hr><h2 id="সারসংক্ষেপ-checklist" tabindex="-1">সারসংক্ষেপ (Checklist) <a class="header-anchor" href="#সারসংক্ষেপ-checklist" aria-label="Permalink to &quot;সারসংক্ষেপ (Checklist)&quot;">​</a></h2><ul><li>[x] Alpine বা Distroless বেস ইমেজ ব্যবহার করা।</li><li>[x] মাল্টি-স্টেজ বিল্ড অ্যাপ্লাই করা।</li><li>[x] একাধিক <code>RUN</code> কমান্ড এক লাইনে লেখা।</li><li>[x] প্যাকেজ ইন্সটলেশনের পর ক্যাশ ডিলিট করা।</li><li>[x] নির্দিষ্ট ভার্সন ট্যাগ ব্যবহার করা।</li></ul><hr><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>একটি ভালো অপ্টিমাইজড ইমেজ আপনার পাইপলাইনকে ১০ গুণ পর্যন্ত দ্রুত করতে পারে!</p></div></div>`);
}
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("docker/image-optimization.md");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const imageOptimization = /* @__PURE__ */ _export_sfc(_sfc_main, [["ssrRender", _sfc_ssrRender]]);
export {
  __pageData,
  imageOptimization as default
};
