# Deployment & DevOps (ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ ржУ ржбрзЗржнржЕржкрж╕)

ржХрзЛржб рж▓рзЗржЦрж╛ рж╢рзЗрж╖ ржХрж░рж╛рж░ ржкрж░ рж╕рзЗржЯрж┐ржХрзЗ ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗ рж▓рж╛ржЗржн ржХрж░рж╛ ржПржмржВ ржорзЗржЗржиржЯрзЗржЗржи ржХрж░рж╛ржЗ рж╣рж▓рзЛ ржЖрж╕рж▓ ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬред ржПржЗ ржЪрзНржпрж╛ржкрзНржЯрж╛рж░рзЗ ржЖржорж░рж╛ рж╢рж┐ржЦржмрзЛ ржХрзАржнрж╛ржмрзЗ ржкрзНрж░ржлрзЗрж╢ржирж╛рж▓ ржЙржкрж╛ржпрж╝рзЗ FastAPI ржЕрзНржпрж╛ржк ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рждрзЗ рж╣ржпрж╝ред

---

## рзз. Dockerizing FastAPI (Best Practices)

ржбржХрж╛рж░ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржлрж▓рзЗ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржк ржпрзЗржХрзЛржирзЛ ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯрзЗ (рж▓рж┐рж┐ржирж╛ржХрзНрж╕, ржЙржЗржирзНржбрзЛржЬ, ржХрзНрж▓рж╛ржЙржб) ржПржХржЗржнрж╛ржмрзЗ ржЪрж▓ржмрзЗред 

### рзз.рзз. `Dockerfile` рждрзИрж░рж┐:
```dockerfile
# рзз. ржкрж╛ржЗржержи ржЗржорзЗржЬ ржмрзНржпржмрж╣рж╛рж░
FROM python:3.10-slim

# рзи. ржбрж┐рж░рзЗржХрзНржЯрж░рж┐ рж╕рзЗржЯ ржХрж░рж╛
WORKDIR /code

# рзй. ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ ржХржкрж┐ ржПржмржВ ржЗржирзНрж╕ржЯрж▓ ржХрж░рж╛
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# рзк. ржХрзЛржб ржХржкрж┐ ржХрж░рж╛
COPY ./app /code/app

# рзл. рж╕рж╛рж░рзНржнрж╛рж░ рж░рж╛ржи ржХрж░рж╛
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80"]
```

---

## рзи. Gunicorn + Uvicorn Worker

ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ рж╢рзБржзрзБ `uvicorn` ржмрзНржпржмрж╣рж╛рж░ ржирж╛ ржХрж░рзЗ `Gunicorn` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржнрж╛рж▓рзЛ ржХрж╛рж░ржг ржПржЯрж┐ ржорж╛рж▓рзНржЯрж┐ржкрж▓ "Worker" ржкрзНрж░рж╕рзЗрж╕ ржорзНржпрж╛ржирзЗржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

`pip install gunicorn`

```bash
# рзкржЯрж┐ ржУржпрж╝рж╛рж░рзНржХрж╛рж░ ржжрж┐ржпрж╝рзЗ ржЕрзНржпрж╛ржк рж░рж╛ржи ржХрж░рж╛
gunicorn -w 4 -k uvicorn.workers.UvicornWorker app.main:app
```

---

## рзй. Nginx Reverse Proxy & SSL

ржЖржкржирж╛рж░ ржПржкрж┐ржЖржЗ рж╕рж░рж╛рж╕рж░рж┐ ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗ ржирж╛ ржЦрзБрж▓рзЗ рж╕рж╛ржоржирзЗ ржПржХржЯрж┐ **Nginx** рж╕рж╛рж░рзНржнрж╛рж░ рж░рж╛ржЦрж╛ ржнрж╛рж▓рзЛред ржПржЯрж┐ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржмрж╛ржбрж╝рж╛ржпрж╝ ржПржмржВ SSL (HTTPS) рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

### рзй.рзз. Nginx ржХржиржлрж┐ржЧ ржлрж╛ржЗрж▓:
```nginx
server {
    listen 80;
    server_name api.example.com;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## рзк. CI/CD Pipeline (GitHub Actions)

ржЖржкржирж╛рж░ ржкрзНрж░рждрж┐ржЯрж┐ ржкрзБрж╢ (Push) ржХрж░рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЕржЯрзЛржорзЗржЯрж┐ржХ ржЯрзЗрж╕рзНржЯ ржПржмржВ ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ ржХрж░рж╛рж░ ржЬржирзНржп GitHub Actions ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

### рзк.рзз. `.github/workflows/main.yml`:
```yaml
name: CI/CD Pipeline

on:
  push:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.10'
      - name: Install dependencies
        run: pip install -r requirements.txt
      - name: Run tests
        run: pytest
```

---

## рзл. Practice Exercises (ржЕржирзБрж╢рзАрж▓ржи)

рзз. ржПржХржЯрж┐ ржЫрзЛржЯ FastAPI ржЕрзНржпрж╛ржкрзЗрж░ ржЬржирзНржп `Dockerfile` рждрзИрж░рж┐ ржХрж░рзБржи ржПржмржВ рждрж╛ ржЖржкржирж╛рж░ рж▓рзЛржХрж╛рж▓ ржорзЗрж╢рж┐ржирзЗ `docker run` ржХрж░рзЗ ржжрзЗржЦрзБржиред
рзи. Gunicorn ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржк рж░рж╛ржи ржХрж░рзБржи ржПржмржВ ржжрзЗржЦрзБржи ржПржХрж╕рж╛ржерзЗ ржХрждржЧрзБрж▓рзЛ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ рж╣ржЪрзНржЫрзЗред
рзй. GitHub-ржП ржПржХржЯрж┐ рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐ ржЦрзБрж▓рзЗ ржЙржкрж░рзЗрж░ ржЯрзЗрж╕рзНржЯ ржкрж╛ржЗржкрж▓рж╛ржЗржиржЯрж┐ рж╕рзЗржЯржЖржк ржХрж░рзБржиред

---

## рзм. Best Practices

1. **Keep Images Small:** рж╕ржм рж╕ржоржпрж╝ `slim` ржмрж╛ `alpine` ржкрж╛ржЗржержи ржЗржорзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
2. **Environment Secrets:** ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржмрж╛ рж╕рж┐ржХрзНрж░рзЗржЯ ржХрж┐ ржХржЦржирзЛржЗ ржбржХрж╛рж░ ржлрж╛ржЗрж▓рзЗ рж▓рж┐ржЦржмрзЗржи ржирж╛, рж╕ржм рж╕ржоржпрж╝ `.env` ржмрж╛ ржбржХрж╛рж░ рж╕рж┐ржХрзНрж░рзЗржЯрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
3. **Auto-scaling:** ржЗржЙржЬрж╛рж░рзЗрж░ рж╕ржВржЦрзНржпрж╛ ржмрж╛ржбрж╝рж▓рзЗ ржпрзЗржи ржЕржЯрзЛржорзЗржЯрж┐ржХ ржУржпрж╝рж╛рж░рзНржХрж╛рж░ ржмрж╛ ржХржирзНржЯрзЗржЗржирж╛рж░ ржмрж╛ржбрж╝рзЗ ржПржоржиржнрж╛ржмрзЗ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржбрж┐ржЬрж╛ржЗржи ржХрж░рзБржиред
4. **Monitoring:** ржЕрзНржпрж╛ржкрзЗрж░ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржжрзЗржЦрж╛рж░ ржЬржирзНржп рж▓ржЧрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо (ржпрзЗржоржи: Sentry ржмрж╛ ELK Stack) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред

---

::: tip ржЕржнрж┐ржиржирзНржжржи!
ржЖржкржирж┐ рж╕ржлрж▓ржнрж╛ржмрзЗ **FastAPI Complete Learning Guide** рж╢рзЗрж╖ ржХрж░рзЗржЫрзЗржиред ржмрзЗрж╕рж┐ржХ рж░рж╛ржЙржЯрж┐ржВ ржерзЗржХрзЗ рж╢рзБрж░рзБ ржХрж░рзЗ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржбрж┐ржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ ржкрж░рзНржпржирзНржд ржЖржкржирж┐ ржПржЦржи ржПржХржЬржи ржкрзБрж░рзЛржжрж╕рзНрждрзБрж░ FastAPI ржбрзЗржнрзЗрж▓ржкрж╛рж░ред рж╢рзБржнржХрж╛ржоржирж╛ ржЖржкржирж╛рж░ ржкрж░ржмрж░рзНрждрзА ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржп! ЁЯЪА
:::
