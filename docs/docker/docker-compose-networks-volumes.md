# Docker Compose - Networks & Volumes: ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ржб ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ЁЯМРЁЯТ╛

ржбржХрж╛рж░ ржХржорзНржкрзЛржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж┐ рж╢рзБржзрзБ ржХржирзНржЯрзЗржЗржирж╛рж░ржЗ ржирзЯ, ржмрж░ржВ ржкрзБрж░рзЛ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржПржмржВ рж╕рзНржЯрзЛрж░рзЗржЬ рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗржУ ржХрзЛржбрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ржПржЗ ржЧрж╛ржЗржбрзЗ ржЖржорж░рж╛ ржХржорзНржкрзЛржЬ ржлрж╛ржЗрж▓рзЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржПржмржВ ржнрж▓рж┐ржЙржорзЗрж░ ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ржб ржмрзНржпржмрж╣рж╛рж░ржЧрзБрж▓рзЛ рж╢рж┐ржЦржмрзЛред

---

## рзз. ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (Network Configuration)

ржбржХрж╛рж░ ржХржорзНржкрзЛржЬ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ ржПржХржЯрж┐ `bridge` ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рждрзИрж░рж┐ ржХрж░рзЗред рждржмрзЗ ржмрзЬ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ ржЖржЗрж╕рзЛрж▓рзЗрж╢ржирзЗрж░ ржЬржирзНржп ржХрж╛рж╕рзНржЯржо ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЬрж░рзБрж░рж┐ред

### ржХ) ржХрж╛рж╕рзНржЯржо ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рждрзИрж░рж┐:
```yaml
networks:
  frontend:
    driver: bridge
  backend:
    driver: bridge
```

### ржЦ) рж╕рж╛рж░рзНржнрж┐рж╕рзЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржпрзБржХрзНржд ржХрж░рж╛:
```yaml
services:
  web:
    image: nginx
    networks:
      - frontend
  api:
    image: node-app
    networks:
      - frontend
      - backend
  db:
    image: postgres
    networks:
      - backend
```
*ржПржЦрж╛ржирзЗ `web` рж╕рж╛рж░рзНржнрж╛рж░ рж╕рж░рж╛рж╕рж░рж┐ `db` ржХрзЗ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗ ржирж╛, ржХрж╛рж░ржг рждрж╛рж░рж╛ ржПржХржЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржирзЗржЗред*

---

## рзи. ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржПрж▓рж┐ржпрж╝рж╛рж╕ (Network Aliases)

ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж┐рж╕ржХрзЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржЕржирзНржп ржХрзЛржирзЛ ржмрж┐рж╢рзЗрж╖ ржирж╛ржорзЗ ржкрж░рж┐ржЪрж┐ржд ржХрж░рж╛рж░ ржЬржирзНржп ржПрж▓рж┐ржпрж╝рж╛рж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ:
```yaml
services:
  db:
    image: mysql
    networks:
      app-net:
        aliases:
          - database_host
```

---

## рзй. ржнрж▓рж┐ржЙржо ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (Volume Configuration)

ржбржХрж╛рж░ ржХржорзНржкрзЛржЬ ржлрж╛ржЗрж▓рзЗ ржнрж▓рж┐ржЙржо ржбрж┐ржлрж╛ржЗржи ржХрж░рж╛рж░ ржЬржирзНржп ржлрж╛ржЗрж▓рзЗрж░ рж╢рзЗрж╖рзЗ ржПржХржЯрж┐ `volumes:` ржмрзНрж▓ржХ ржерж╛ржХрзЗред

### ржХ) Named Volumes (ржирж╛ржоржпрзБржХрзНржд ржнрж▓рж┐ржЙржо):
ржПржЯрж┐ ржбржХрж╛рж░ ржирж┐ржЬрзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗ ржПржмржВ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржЬржирзНржп рж╕ржмржЪрзЗрзЯрзЗ ржирж┐рж░рж╛ржкржжред
```yaml
services:
  db:
    image: postgres
    volumes:
      - db_data:/var/lib/postgresql/data

volumes:
  db_data:  # ржПржЦрж╛ржирзЗ ржнрж▓рж┐ржЙржоржЯрж┐ ржбрж┐ржлрж╛ржЗржи ржХрж░рждрзЗ рж╣рзЯ
```

### ржЦ) Bind Mounts (рж╣рзЛрж╕рзНржЯ ржкрж╛рже ржорж╛ржЙржирзНржЯ):
ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗрж░ рж╕ржорзЯ рж╣рзЛрж╕рзНржЯ ржорзЗрж╢рж┐ржирзЗрж░ ржлрж╛ржЗрж▓ рж╕рж░рж╛рж╕рж░рж┐ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп:
```yaml
services:
  web:
    image: nginx
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro  # Read-only ржорж╛ржЙржирзНржЯ
```

---

## рзк. ржнрж▓рж┐ржЙржо ржПржмржВ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржбрзНрж░рж╛ржЗржнрж╛рж░ (Drivers)

ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржбрж┐ржлрж▓рзНржЯ ржбрзНрж░рж╛ржЗржнрж╛рж░ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ рж░рж┐ржорзЛржЯ рж╕рзНржЯрзЛрж░рзЗржЬ ржмрж╛ ржУржнрж╛рж░рж▓рзЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:

```yaml
volumes:
  shared_data:
    driver: local  # ржЕржержмрж╛ cloud drivers ржпрзЗржоржи awslogs
```

```yaml
networks:
  swarm_net:
    driver: overlay  # ржорж╛рж▓рзНржЯрж┐-рж╣рзЛрж╕рзНржЯ ржХрж╛ржирзЗржХрзНржЯрж┐ржнрж┐ржЯрж┐рж░ ржЬржирзНржп
```

---

## рзл. рж╕рж╛ржорж╛рж░рж┐ ржЯрзЗржмрж┐рж▓

| ржлрж┐ржЪрж╛рж░ | ржбржХрж╛рж░ ржХржорзНржкрзЛржЬ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи |
| :--- | :--- |
| **Custom Network** | `networks:` ржмрзНрж▓ржХрзЗ ржбрж┐ржлрж╛ржЗржи ржХрж░рждрзЗ рж╣рзЯ |
| **Network Aliases** | рж╕рж╛рж░рзНржнрж┐рж╕рзЗрж░ ржнрзЗрждрж░ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗрж░ ржирж┐ржЪрзЗ ржерж╛ржХрзЗ |
| **Named Volume** | ржлрж╛ржЗрж▓рзЗрж░ рж╢рзЗрж╖рзЗ `volumes:` ржмрзНрж▓ржХрзЗ ржбрж┐ржлрж╛ржЗржи ржХрж░рждрзЗ рж╣рзЯ |
| **Bind Mount** | рж╕рж░рж╛рж╕рж░рж┐ ржкрж╛рже ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ (`./host:/container`) |

---

> [!IMPORTANT]
> ржбржХрж╛рж░ ржХржорзНржкрзЛржЬ ржХржирзНржЯрзЗржЗржирж╛рж░ ржбрж┐рж▓рж┐ржЯ ржХрж░рж▓рзЗржУ **Named Volumes** ржбрж┐рж▓рж┐ржЯ ржХрж░рзЗ ржирж╛ред ржкрж░ржмрж░рзНрждрзА ржмрж╛рж░ `docker-compose up` ржжрж┐рж▓рзЗ ржкрзБрж░ржирзЛ ржбрзЗржЯрж╛ ржЖржмрж╛рж░ ржлрж┐рж░рзЗ ржЖрж╕рзЗред ржПржЯрж┐ржЗ ржбрзЗржЯрж╛ ржкрж╛рж░рж╕рж┐рж╕рзНржЯрзЗржирзНрж╕рзЗрж░ ржорзНржпрж╛ржЬрж┐ржХред