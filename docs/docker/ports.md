# Port Mapping (ржкрзЛрж░рзНржЯ ржорзНржпрж╛ржкрж┐ржВ) ЁЯМР

ржбржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░ржЧрзБрж▓рзЛ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ ржПржХржЯрж┐ ржЖржЗрж╕рзЛрж▓рзЗржЯрзЗржб ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ ржерж╛ржХрзЗред ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржнрзЗрждрж░рзЗрж░ ржХрзЛржирзЛ рж╕рж╛рж░рзНржнрж┐рж╕ржХрзЗ (ржпрзЗржоржи: ржУрзЯрзЗржм рж╕рж╛рж░рзНржнрж╛рж░ ржмрж╛ ржбрж╛ржЯрж╛ржмрзЗрж╕) ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░ ржмрж╛ ржмрж╛ржЗрж░рзЗрж░ ржкрзГржерж┐ржмрзА ржерзЗржХрзЗ ржПржХрзНрж╕рзЗрж╕ ржХрж░рж╛рж░ ржЬржирзНржп **Port Mapping** ржЕржкрж░рж┐рж╣рж╛рж░рзНржпред

---

## рзз. `-p` ржлрзНрж▓рзНржпрж╛ржЧ ржПржмржВ ржПрж░ ржмрзНржпржмрж╣рж╛рж░

ржХржирзНржЯрзЗржЗржирж╛рж░ рж░рж╛ржи ржХрж░рж╛рж░ рж╕ржорзЯ ржЖржорж░рж╛ `-p` (Publish) ржлрзНрж▓рзНржпрж╛ржЧ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред ржПрж░ рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕ рж╣рж▓рзЛ:
```bash
docker run -p <HostPort>:<ContainerPort> <image_name>
```

- **Host Port:** ржЖржкржирж╛рж░ ржирж┐ржЬрзЗрж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗрж░ ржкрзЛрж░рзНржЯ (ржпрзЗржЯрж┐ ржжрж┐рзЯрзЗ ржЖржкржирж┐ ржПржХрзНрж╕рзЗрж╕ ржХрж░ржмрзЗржи)ред
- **Container Port:** ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржнрзЗрждрж░рзЗ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐ ржпрзЗ ржкрзЛрж░рзНржЯрзЗ ржЪрж▓ржЫрзЗред

**ржЙржжрж╛рж╣рж░ржг:**
```bash
docker run -p 8080:80 nginx
```
ржПржЦрж╛ржирзЗ Nginx ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржнрзЗрждрж░рзЗ рзорзж ржкрзЛрж░рзНржЯрзЗ ржЪрж▓ржЫрзЗ, ржХрж┐ржирзНрждрзБ ржЖржкржирж┐ ржЖржкржирж╛рж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ `localhost:8080` рж▓рж┐ржЦрзЗ рж╕рзЗржЯрж┐ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред

---

## рзи. Multiple Port Mappings

ржПржХржЯрж┐ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗ ржПржХрзЗрж░ ржЕржзрж┐ржХ ржкрзЛрж░рзНржЯ ржорзНржпрж╛ржк ржХрж░рж╛рж░ ржкрзНрж░рзЯрзЛржЬржи рж╣рждрзЗ ржкрж╛рж░рзЗред ржпрзЗржоржи, ржПржХржЯрж┐ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржУрзЯрзЗржм ржПржмржВ ржПржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓ ржЖрж▓рж╛ржжрж╛ ржкрзЛрж░рзНржЯрзЗ ржерж╛ржХрж▓рзЗ:
```bash
docker run -p 80:80 -p 8080:8080 my-app
```

---

## рзй. Random Port Assignment (`-P`)

ржпржжрж┐ ржЖржкржирж┐ рж╣рзЛрж╕рзНржЯ ржкрзЛрж░рзНржЯ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж░рзЗ ржирж╛ ржжрж┐рждрзЗ ржЪрж╛ржи ржПржмржВ ржбржХрж╛рж░ржХрзЗ ржмрж▓рзЗржи ржпрзЗ ржХрзЛржирзЛ ржПржХржЯрж┐ ржЦрж╛рж▓рж┐ ржкрзЛрж░рзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ, рждржмрзЗ ржмрзЬ рж╣рж╛рждрзЗрж░ `-P` ржлрзНрж▓рзНржпрж╛ржЧ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ:
```bash
docker run -P nginx
```
ржбржХрж╛рж░ ржЕржЯрзЛржорзЗржЯрж┐ржХ ржХрзЛржирзЛ ржПржХржЯрж┐ рж╣рж╛ржЗ-рж░рзЗржЮрзНржЬ ржкрзЛрж░рзНржЯ (ржпрзЗржоржи: рзйрзирзнрзмрзо) ржПрж╕рж╛ржЗржи ржХрж░ржмрзЗред ржПржЯрж┐ `docker ps` ржХржорж╛ржирзНржб ржжрж┐рзЯрзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯред

---

## рзк. Port Exposure vs Publishing

ржПржЗ ржжрзБржЯрж┐ ржЯрж╛рж░рзНржо ржЕржирзЗржХрзЗрж░ ржХрж╛ржЫрзЗ ржХржиржлрж┐ржЙржЬрж┐ржВ ржоржирзЗ рж╣рждрзЗ ржкрж╛рж░рзЗ:
- **Exposing (EXPOSE):** ржПржЯрж┐ ржорзВрж▓ржд ржПржХржЯрж┐ ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржиред ржПржЯрж┐ ржЬрж╛ржирж╛рзЯ ржпрзЗ ржХржирзНржЯрзЗржЗржирж╛рж░ржЯрж┐ ржХрзЛржи ржкрзЛрж░рзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗ, ржХрж┐ржирзНрждрзБ ржПржЯрж┐ рж╣рзЛрж╕рзНржЯ ржорзЗрж╢рж┐ржирзЗ ржкрзЛрж░рзНржЯржЯрж┐ ржУржкрзЗржи ржХрж░рзЗ ржирж╛ред
- **Publishing (-p):** ржПржЯрж┐ ржмрж╛рж╕рзНрждржмрзЗ рж╣рзЛрж╕рзНржЯ ржорзЗрж╢рж┐ржирзЗрж░ ржкрзЛрж░рзНржЯрзЗрж░ рж╕рж╛ржерзЗ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржкрзЛрж░рзНржЯ рж▓рж┐ржЩрзНржХ ржХрж░рзЗ ржжрзЗрзЯред

---

## рзл. Localhost vs 0.0.0.0

ржкрзЛрж░рзНржЯ ржорзНржпрж╛ржк ржХрж░рж╛рж░ рж╕ржорзЯ ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЖржЗржкрж┐ ржмрж╛ржЗржирзНржб ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржи:

- **рж╢рзБржзрзБржорж╛рждрзНрж░ ржирж┐ржЬрзЗрж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗрж░ ржЬржирзНржп:** `-p 127.0.0.1:8080:80` (ржмрж╛ржЗрж░рзЗрж░ ржХрзЗржЙ ржПржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛)ред
- **рж╕ржмрж╛рж░ ржЬржирзНржп ржЙржирзНржорзБржХрзНржд:** `-p 0.0.0.0:8080:80` (ржбрж┐ржлрж▓рзНржЯ, ржЖржкржирж╛рж░ рж▓рзЛржХрж╛рж▓ ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗрж░ рж╕ржмрж╛ржЗ ржПржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ)ред

---

## рзм. ржкрзЛрж░рзНржЯ ржХржиржлрзНрж▓рж┐ржХрзНржЯ (Port Conflict)

ржпржжрж┐ ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗ ржЕрж▓рж░рзЗржбрж┐ ржХрзЛржирзЛ рж╕рж╛рж░рзНржнрж┐рж╕ рзорзжрзорзж ржкрзЛрж░рзНржЯрзЗ ржЪрж▓рждрзЗ ржерж╛ржХрзЗ ржПржмржВ ржЖржкржирж┐ ржбржХрж╛рж░рзЗржУ рзорзжрзорзж ржкрзЛрж░рзНржЯ ржорзНржпрж╛ржк ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗржи, рждржмрзЗ ржбржХрж╛рж░ ржПржХржЯрж┐ ржПрж░рж░ ржжрзЗржЦрж╛ржмрзЗ:
`Bind for 0.0.0.0:8080 failed: port is already allocated.`

**рж╕ржорж╛ржзрж╛ржи:** рж╣рзЯ ржЖржЧрзЗрж░ рж╕рж╛рж░рзНржнрж┐рж╕ржЯрж┐ ржмржирзНржз ржХрж░рзБржи, ржЕржержмрж╛ ржбржХрж╛рж░рзЗ ржЕржирзНржп ржПржХржЯрж┐ рж╣рзЛрж╕рзНржЯ ржкрзЛрж░рзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи (ржпрзЗржоржи: `-p 9090:8080`)ред

---

## ржХржорж╛ржирзНржб рж╕рж╛ржорж╛рж░рж┐ ржЯрзЗржмрж┐рж▓

| Command | Description |
| :--- | :--- |
| `-p 80:80` | рж╣рзЛрж╕рзНржЯ рзорзж ржкрзЛрж░рзНржЯржХрзЗ ржХржирзНржЯрзЗржЗржирж╛рж░ рзорзж ржкрзЛрж░рзНржЯрзЗ рж▓рж┐ржЩрзНржХ ржХрж░рзЗ |
| `-p 127.0.0.1:80:80` | рж▓рзБржкржмрзНржпрж╛ржХ ржЖржЗржкрж┐-рждрзЗ ржкрзЛрж░рзНржЯ ржмрж╛ржЗржирзНржб ржХрж░рзЗ (рж╕рж╛рж░рзНржнрж╛рж░ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐) |
| `-P` | ржЗржорзЗржЬрзЗрж░ рж╕ржм ржПржХрзНрж╕ржкрзЛржЬржб ржкрзЛрж░рзНржЯржХрзЗ рж░тАНрзНржпрж╛ржирзНржбржо рж╣рзЛрж╖рзНржЯ ржкрзЛрж░рзНржЯрзЗ ржкрж╛ржмрж▓рж┐рж╢ ржХрж░рзЗ |
| `docker port <container>` | ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржкрзЛрж░рзНржЯ ржорзНржпрж╛ржкрж┐ржВ рж▓рж┐рж╕рзНржЯ ржжрзЗржЦрж╛рж░ ржЬржирзНржп |

---

> [!IMPORTANT]
> ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ ржкрзЛрж░рзНржЯ ржорзНржпрж╛ржкрж┐ржВ ржХрж░рж╛рж░ рж╕ржорзЯ ржирж┐рж░рж╛ржкрждрзНрждрж╛рж░ ржЦрж╛рждрж┐рж░рзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржкрзЛрж░рзНржЯржЧрзБрж▓рзЛржЗ ржУржкрзЗржи рж░рж╛ржЦрж╛ ржЙржЪрж┐рждред
