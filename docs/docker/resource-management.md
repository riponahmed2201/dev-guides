# Container Resource Management: рж░рж┐рж╕рзЛрж░рзНрж╕ ржирж┐рзЯржирзНрждрзНрж░ржг тЪб

ржбржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░ржЧрзБрж▓рзЛ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ рж╣рзЛрж╕рзНржЯ ржорзЗрж╢рж┐ржирзЗрж░ рж╕ржм CPU ржПржмржВ RAM ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржХрж┐ржирзНрждрзБ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯрзЗ ржПржХржЯрж┐ ржХржирзНржЯрзЗржЗржирж╛рж░ ржпрзЗржи ржкрзБрж░рзЛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж░рж┐рж╕рзЛрж░рзНрж╕ ржжржЦрж▓ ржХрж░рзЗ ржирж╛ ржирзЗрзЯ, рж╕рзЗржЬржирзНржп рж▓рж┐ржорж┐ржЯ рж╕рзЗржЯ ржХрж░рж╛ ржЦрзБржмржЗ ржЬрж░рзБрж░рж┐ред

---

## рзз. ржорзЗржорзЛрж░рж┐ ржХржирзНржЯрзНрж░рзЛрж▓ (Memory Management)

ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржЬржирзНржп рж░рзНржпрж╛ржо (RAM) рж▓рж┐ржорж┐ржЯ ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ ржлрзНрж▓рзНржпрж╛ржЧржЧрзБрж▓рзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ:

- **RAM Limit (-m):** ржХржирзНржЯрзЗржЗржирж╛рж░ ржХрждржЯрзБржХрзБ ржорзЗржорзЛрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред
  ```bash
  docker run -d -m 512m nginx
  ```
- **Swap Limit (--memory-swap):** RAM ржПрж░ рж╕рж╛ржерзЗ ржХрждржЯрзБржХрзБ рж╕рзЛрзЯрж╛ржк ржорзЗржорзЛрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред
  ```bash
  docker run -d -m 512m --memory-swap 1g nginx
  ```
  *(ржПржЦрж╛ржирзЗ ржХржирзНржЯрзЗржЗржирж╛рж░ржЯрж┐ рзлрззрзи ржорзЗржЧрж╛ржмрж╛ржЗржЯ рж░рзНржпрж╛ржо ржПржмржВ ржЕрждрж┐рж░рж┐ржХрзНржд рзлрззрзи ржорзЗржЧрж╛ржмрж╛ржЗржЯ рж╕рзЛрзЯрж╛ржк ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ, ржорзЛржЯ рзз ржЬрж┐ржмрж┐ред)*

---

## рзи. CPU ржХржирзНржЯрзНрж░рзЛрж▓ (CPU Management)

ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржкрзНрж░рзЛрж╕рзЗрж╕рж┐ржВ ржкрж╛ржУрзЯрж╛рж░ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛рж░ ржкржжрзНржзрждрж┐:

- **CPU Limit (--cpus):** ржХржирзНржЯрзЗржЗржирж╛рж░ ржХрждржЯрж┐ CPU ржХрзЛрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред
  ```bash
  docker run -d --cpus 2 nginx
  ```
  *(ржПржЯрж┐ рзи ржЯрж┐ ржХрзЛрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржкрж╛рж░ржорж┐рж╢ржи ржжрзЗржмрзЗред)*

- **CPU Weight (--cpu-shares):** рж░рж┐рж╕рзЛрж░рзНрж╕ ржХрзНрж░рж╛ржЗрж╕рж┐рж╕ ржмрж╛ ржЪрж╛ржкрзЗрж░ рж╕ржорзЯ ржХрзЛржи ржХржирзНржЯрзЗржЗржирж╛рж░ ржмрзЗрж╢рж┐ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░ ржкрж╛ржмрзЗ рждрж╛ ржарж┐ржХ ржХрж░рзЗред
  ```bash
  docker run -d --cpu-shares 512 nginx
  ```
  *(ржбрж┐ржлрж▓рзНржЯ ржнрзНржпрж╛рж▓рзБ рззрзжрзирзкред рзлрззрзи ржжрж┐рж▓рзЗ ржПржЯрж┐ ржЕржирзНржп ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ рждрзБрж▓ржирж╛рзЯ ржЕрж░рзНржзрзЗржХ ржкрзНрж░рж╛рзЯрзЛрж░рж┐ржЯрж┐ ржкрж╛ржмрзЗред)*

---

## рзй. рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржПржмржВ ржоржирж┐ржЯрж░рж┐ржВ (Monitoring)

ржХрзЛржи ржХржирзНржЯрзЗржЗржирж╛рж░ ржмрж░рзНрждржорж╛ржирзЗ ржХрждржЯрзБржХрзБ рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗ рждрж╛ рж▓рж╛ржЗржн ржжрзЗржЦрж╛рж░ ржЬржирзНржп:

```bash
docker stats
```
ржПржЯрж┐ ржПржХржЯрж┐ ржЗржирзНржЯрж╛рж░рж╛ржХрзНржЯрж┐ржн ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржжрзЗржЦрж╛ржмрзЗ ржпрзЗржЦрж╛ржирзЗ CPU, Memory, ржПржмржВ Network usage ржПрж░ рж▓рж╛ржЗржн рж╕рзНржЯрзЗржЯрж╛рж╕ ржжрзЗржЦрж╛ ржпрж╛рзЯред

---

## рзк. рж░рж╛ржирж┐ржВ ржХржирзНржЯрзЗржЗржирж╛рж░ ржЖржкржбрзЗржЯ (Docker Update)

ржПржХржЯрж┐ ржХржирзНржЯрзЗржЗржирж╛рж░ ржЪрж╛рж▓рзБ ржерж╛ржХрж╛ ржЕржмрж╕рзНржерж╛рзЯ рждрж╛рж░ рж░рж┐рж╕рзЛрж░рзНрж╕ рж▓рж┐ржорж┐ржЯ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣рж▓рзЗ:

```bash
docker update -m 1g --cpus 1.5 container_id
```
ржПржЯрж┐ ржХржирзНржЯрзЗржЗржирж╛рж░ рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ ржирж╛ ржХрж░рзЗржЗ рждрж╛рж░ рж▓рж┐ржорж┐ржЯ ржЖржкржбрзЗржЯ ржХрж░рзЗ ржжрзЗрзЯред

---

## рзл. рж░рж┐рж╕рзЛрж░рзНрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ рж╕рж╛ржорж╛рж░рж┐

| ржЯрж╛рж╕рзНржХ | ржХржорж╛ржирзНржб / ржлрзНрж▓рзНржпрж╛ржЧ |
| :--- | :--- |
| ржорзЗржорзЛрж░рж┐ рж▓рж┐ржорж┐ржЯ | `-m ` ржмрж╛ `--memory` |
| рж╕рзЛржпрж╝рж╛ржк рж▓рж┐ржорж┐ржЯ | `--memory-swap` |
| CPU рж▓рж┐ржорж┐ржЯ | `--cpus` |
| ржкрзНрж░рж╛рзЯрзЛрж░рж┐ржЯрж┐ рж╕рзЗржЯ | `--cpu-shares` |
| рж╕рж░рж╛рж╕рж░рж┐ ржЖржкржбрзЗржЯ | `docker update` |
| рж▓рж╛ржЗржн ржоржирж┐ржЯрж░рж┐ржВ | `docker stats` |

---

> [!CAUTION]
> ржпржжрж┐ ржХрзЛржирзЛ ржХржирзНржЯрзЗржЗржирж╛рж░ рждрж╛рж░ рж▓рж┐ржорж┐ржЯ ржХрж░рж╛ ржорзЗржорзЛрж░рж┐рж░ ржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗ, рждржмрзЗ ржбржХрж╛рж░ рждрж╛ржХрзЗ **OOM (Out Of Memory) Kill** ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред рждрж╛ржЗ рж╕ржмрж╕ржорзЯ ржЗржорзНржкрж░ржЯрзНржпрж╛ржирзНржЯ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржЬржирзНржп ржХрж┐ржЫрзБ 'Memory Reservation' рж░рж╛ржЦрж╛ ржнрж╛рж▓рзЛред

---

ржкрж░ржмрж░рзНрждрзА ржзрж╛ржБржкрзЗ ржЖржорж░рж╛ ржжрзЗржЦржмрзЛ ржбржХрж╛рж░рзЗрж░ рж╕ржмржЪрзЗрзЯрзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЕржВрж╢ **Docker Security** ржПржмржВ рж╕рж┐ржХрж┐ржЙрж░ ржХржирзНржЯрзЗржЗржирж╛рж░ ржбрж┐ржХрзНрж▓рзЗрзЯрж╛рж░ ржХрж░рж╛рж░ ржЙржкрж╛рзЯред ЁЯЪА
