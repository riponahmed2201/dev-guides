# Docker Secrets ЁЯдл

ржбржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗ рж╕рзЗржирж╕рж┐ржЯрж┐ржн рждржерзНржп (ржпрзЗржоржи: ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб, ржПржкрж┐ржЖржЗ ржХрж┐, ржкрзНрж░рж╛ржЗржнрзЗржЯ ржХрж┐) ржирж┐рж░рж╛ржкржжрзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛рж░ ржЬржирзНржп **Docker Secrets** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржПржЯрж┐ ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓рзЗрж░ рждрзБрж▓ржирж╛рзЯ ржЕржирзЗржХ ржмрзЗрж╢рж┐ ржирж┐рж░рж╛ржкржжред

---

## рзз. Docker Secrets ржХрж┐?

Docker Secrets рж╣рж▓рзЛ ржПржХржЯрж┐ ржбржХрж╛рж░ ржирзЗржЯрж┐ржн ржлрж┐ржЪрж╛рж░ ржпрж╛ рж╕рзЗржирж╕рж┐ржЯрж┐ржн ржбрзЗржЯрж╛ржХрзЗ ржПржиржХрзНрж░рж┐ржкрзНржЯрзЗржб ржЕржмрж╕рзНржерж╛рзЯ рж╕рзНржЯрзЛрж░ ржХрж░рзЗ ржПржмржВ рж╢рзБржзрзБржорж╛рждрзНрж░ ржЕржирзБржорзЛржжрж┐ржд ржХржирзНржЯрзЗржЗржирж╛рж░ржХрзЗ рж╕рзЗржЯрж┐ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржПржХрзНрж╕рзЗрж╕ ржжрзЗрзЯред

- ржПржЯрж┐ ржкрзНрж░рж╛ржержорж┐ржХржнрж╛ржмрзЗ **Docker Swarm** ржорзЛржбрзЗ ржХрж╛ржЬ ржХрж░рж╛рж░ ржЬржирзНржп ржбрж┐ржЬрж╛ржЗржи ржХрж░рж╛ рж╣рзЯрзЗржЫрж┐рж▓ред
- ржмрж░рзНрждржорж╛ржирзЗ **Docker Compose**-ржПрж░ ржорж╛ржзрзНржпржорзЗ рж▓рзЛржХрж╛рж▓ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗржУ ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред

---

## рзи. ржХрзЗржи ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ (.env) ржпржерзЗрж╖рзНржЯ ржирзЯ?

ржЕржирзЗржХ рж╕ржорзЯ ржЖржорж░рж╛ `.env` ржлрж╛ржЗрж▓ ржмрж╛ `ENV` ржЗржирзНрж╕ржЯрзНрж░рж╛ржХрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред ржХрж┐ржирзНрждрзБ ржПрж░ ржХрж┐ржЫрзБ ржЭрзБржБржХрж┐ ржЖржЫрзЗ:

- `docker inspect` ржХржорж╛ржирзНржб ржжрж┐рж▓рзЗ ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ржЧрзБрж▓рзЛ ржкрзНрж▓рзЗржЗржи ржЯрзЗржХрзНрж╕ржЯ рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯред
- рж▓ржЧ ржлрж╛ржЗрж▓рзЗ ржПржЧрзБрж▓рзЛ ржЪрж▓рзЗ ржЖрж╕рж╛рж░ рж╕ржорзНржнрж╛ржмржирж╛ ржерж╛ржХрзЗред
- ржбржХрж╛рж░ рж╣рж┐рж╕рзНржЯрзЛрж░рж┐рждрзЗ ржПржЧрзБрж▓рзЛ ржерзЗржХрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

**Docker Secrets** ржПржЗ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рзЗ ржХрж╛рж░ржг ржПржЯрж┐ ржорзЗржорж░рж┐рждрзЗ (tmpfs) ржорж╛ржЙржирзНржЯ рж╣рзЯ ржПржмржВ ржбрж┐рж╕рзНржХрзЗ рж╕рзНржерж╛рзЯрзАржнрж╛ржмрзЗ ржЬржорж╛ ржерж╛ржХрзЗ ржирж╛ред

---

## рзй. Docker Compose-ржП Secrets ржмрзНржпржмрж╣рж╛рж░

рж▓рзЛржХрж╛рж▓рж┐ ржбржХрж╛рж░ ржХржорзНржкрзЛржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ рж╕ржорзЯ ржЖржкржирж┐ ржирж┐ржЪрзЗрж░ ржорждрзЛ ржХрж░рзЗ рж╕рж┐ржХрзНрж░рзЗржЯрж╕ ржбрж┐ржлрж╛ржЗржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:

```yaml
services:
  db:
    image: postgres
    secrets:
      - db_password

secrets:
  db_password:
    file: ./password.txt
```

ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржнрзЗрждрж░рзЗ ржПржЗ рж╕рж┐ржХрзНрж░рзЗржЯржЯрж┐ `/run/secrets/db_password` ржкрж╛ржерзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛ржмрзЗред

---

## рзк. Docker Swarm ржорзЛржбрзЗ Secrets Management

Swarm ржорзЛржбрзЗ рж╕рж┐ржХрзНрж░рзЗржЯ рждрзИрж░рж┐ ржХрж░рж╛рж░ ржХржорж╛ржирзНржб:

```bash
echo "my_super_secret_password" | docker secret create db_pass -
```

рж╕рж╛рж░рзНржнрж┐рж╕ ржХрзНрж░рж┐рзЯрзЗржЯ ржХрж░рж╛рж░ рж╕ржорзЯ рж╕рж┐ржХрзНрж░рзЗржЯ ржпрзЛржЧ ржХрж░рж╛:

```bash
docker service create --name my-app --secret db_pass my-image
```

---

## рзл. рж╕рж┐ржХрзНрж░рзЗржЯ ржорж╛ржЙржирзНржЯрж┐ржВ (Mounting)

ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ рж╕рж┐ржХрзНрж░рзЗржЯрж╕ `/run/secrets/<secret_name>` ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ ржерж╛ржХрзЗред ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рзЗржЗ ржлрж╛ржЗрж▓ ржерзЗржХрзЗ ржбрзЗржЯрж╛ рж░рж┐ржб ржХрж░рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗред

```python
# Python ржЙржжрж╛рж╣рж░ржг
with open('/run/secrets/db_password', 'r') as f:
    db_password = f.read().strip()
```

---

## рзм. ржерж╛рж░рзНржб-ржкрж╛рж░рзНржЯрж┐ рж╕рж┐ржХрзНрж░рзЗржЯ ржорзНржпрж╛ржирзЗржЬрж╛рж░ (HashiCorp Vault)

ржмрзЬ ржПржирзНржЯрж╛рж░ржкрзНрж░рж╛ржЗржЬ рж▓рзЗржнрзЗрж▓рзЗ ржбржХрж╛рж░рзЗрж░ ржмрж┐рж▓рзНржЯ-ржЗржи рж╕рж┐ржХрзНрж░рзЗржЯрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯрзЗрж░ ржкрж╛рж╢рж╛ржкрж╛рж╢рж┐ **HashiCorp Vault**, **AWS Secrets Manager**, ржмрж╛ **Azure Key Vault** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржПржЧрзБрж▓рзЛ рж╕рж┐ржХрзНрж░рзЗржЯ рж░рзЛржЯрзЗрж╢ржи (Secret Rotation) ржПржмржВ ржЖрж░ржУ ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ржб рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред

---

## рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк (Summary)

ржирж┐рж░рж╛ржкржж ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░рзЗрж░ ржЬржирзНржп рж╕рзЗржирж╕рж┐ржЯрж┐ржн ржбрзЗржЯрж╛ ржХржЦржирзЛржЗ рж╣рж╛рж░рзНржбржХрзЛржб ржХрж░ржмрзЗржи ржирж╛ред ржЫрзЛржЯ ржкрзНрж░рзЛржЬрзЗржХрзНржЯрзЗрж░ ржЬржирзНржп **Docker Compose Secrets** ржПржмржВ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржмрж╛ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗрж░ ржЬржирзНржп **Docker Swarm Secrets** ржмрж╛ **Vault** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╕ржмржЪрзЗрзЯрзЗ ржнрж╛рж▓рзЛ ржкрзНрж░рзНржпрж╛ржХржЯрж┐рж╕ред

---

> [!CAUTION]
> рж╕рж┐ржХрзНрж░рзЗржЯрж╕ ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ (ржпрзЗржоржи: `password.txt`) ржХржЦржирзЛржЗ ржЧрж┐ржЯ ржмрж╛ рж╕рзЛрж░рзНрж╕ ржХржирзНржЯрзНрж░рзЛрж▓рзЗ ржкрзБрж╢ ржХрж░ржмрзЗржи ржирж╛ред ржПржЧрзБрж▓рзЛржХрзЗ `.gitignore`-ржП рж░рж╛ржЦрзБржиред
