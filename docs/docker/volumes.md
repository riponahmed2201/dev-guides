# Docker Volumes & Persistence: ржбрзЗржЯрж╛ рж╕рзНржерж╛рзЯрзА ржХрж░рж╛рж░ ржЙржкрж╛рзЯ ЁЯТ╛

ржбржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ "Ephemeral" ржмрж╛ ржЕрж╕рзНржерж╛рзЯрзАред ржЕрж░рзНржерж╛рзО, ржХрзЛржирзЛ ржХржирзНржЯрзЗржЗржирж╛рж░ ржбрж┐рж▓рж┐ржЯ ржХрж░рзЗ ржжрж┐рж▓рзЗ рждрж╛рж░ ржнрзЗрждрж░рзЗрж░ рж╕ржм ржбрзЗржЯрж╛ржУ ржорзБржЫрзЗ ржпрж╛рзЯред ржХрж┐ржирзНрждрзБ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржмрж╛ ржЗржЙржЬрж╛рж░ ржлрж╛ржЗрж▓рзЗрж░ ржорждрзЛ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржбрзЗржЯрж╛ ржЖржорж╛ржжрзЗрж░ рж╕рзНржерж╛рзЯрзАржнрж╛ржмрзЗ рж╕рзЗржн рж░рж╛ржЦрж╛ ржкрзНрж░рзЯрзЛржЬржиред ржПрж░ ржЬржирзНржпржЗ ржбржХрж╛рж░ **Volumes** ржПржмржВ **Bind Mounts** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

---

## рзз. Volume ржХрж┐ ржПржмржВ ржХрзЗржи ржкрзНрж░рзЯрзЛржЬржи?

**Volume** рж╣рж▓рзЛ ржбржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржмрж╛ржЗрж░рзЗрж░ ржПржХржЯрж┐ рж╕рзНржЯрзЛрж░рзЗржЬ ржпрж╛ рж╣рзЛрж╕рзНржЯ ржорзЗрж╢рж┐ржирзЗрж░ ржбржХрж╛рж░ ржорзНржпрж╛ржирзЗржЬржб ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ ржерж╛ржХрзЗред
- **ржХрзЗржи ржкрзНрж░рзЯрзЛржЬржи:** ржХржирзНржЯрзЗржЗржирж╛рж░ рж╕рзНржЯржк ржмрж╛ ржбрж┐рж▓рж┐ржЯ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗржУ ржбрзЗржЯрж╛ рж╣рж╛рж░рж╛рзЯ ржирж╛ред ржПржХрж╛ржзрж┐ржХ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржбрзЗржЯрж╛ рж╢рзЗрзЯрж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред

---

## рзи. ржнрж▓рж┐ржЙржорзЗрж░ ржкрзНрж░ржХрж╛рж░ржнрзЗржж (Volume Types)

ржбржХрж╛рж░рзЗ ржкрзНрж░ржзрж╛ржиржд рждрж┐ржи ржзрж░ржирзЗрж░ ржнрж▓рж┐ржЙржо рж░рзЯрзЗржЫрзЗ:

### ржХ) Named Volumes (рж╕ржмржЪрзЗрзЯрзЗ ржЬржиржкрзНрж░рж┐рзЯ)
ржбржХрж╛рж░ ржирж┐ржЬрзЗржЗ ржПржЗ ржнрж▓рж┐ржЙржо ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗред ржЖржкржирж┐ рж╢рзБржзрзБ ржПржХржЯрж┐ ржирж╛ржо ржжрзЗржи (ржпрзЗржоржи: `db_data`)ред ржПржЯрж┐ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯрзЗрж░ ржЬржирзНржп рж╕рзЗрж░рж╛ред 
- **рж▓рзЛржХрзЗрж╢ржи:** `/var/lib/docker/volumes/` (Linux-ржП)ред

### ржЦ) Anonymous Volumes
ржПржЧрзБрж▓рзЛрж░ ржХрзЛржирзЛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирж╛ржо ржерж╛ржХрзЗ ржирж╛ред ржХржирзНржЯрзЗржЗржирж╛рж░ ржбрж┐рж▓рж┐ржЯ рж╣рж▓рзЗ ржПржЧрзБрж▓рзЛ рж╕рж╛ржзрж╛рж░ржгржд рж╣рж╛рж░рж┐рзЯрзЗ ржпрж╛рзЯ (ржпржжрж┐ ржирж╛ ржпрждрзНржи ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣рзЯ)ред ржЯрзЗржорзНржкрзЛрж░рж╛рж░рж┐ рж╕рзНржЯрзЛрж░рзЗржЬрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред

### ржЧ) Bind Mounts
рж╣рзЛрж╕рзНржЯ ржорзЗрж╢рж┐ржирзЗрж░ ржпрзЗржХрзЛржирзЛ ржлрзЛрж▓рзНржбрж╛рж░ ржмрж╛ ржлрж╛ржЗрж▓ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕рж░рж╛рж╕рж░рж┐ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж╛ рж╣рзЯред ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯрзЗрж░ рж╕ржорзЯ ржПржЯрж┐ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржмрзНржпржмрж╣рзГржд рж╣рзЯ (рж╣ржЯ рж░рж┐рж▓рзЛржбрж┐ржВ-ржПрж░ ржЬржирзНржп)ред
- **рж▓рзЛржХрзЗрж╢ржи:** рж╣рзЛрж╕рзНржЯ ржорзЗрж╢рж┐ржирзЗрж░ ржпрзЗржХрзЛржирзЛ ржЬрж╛рзЯржЧрж╛ (ржпрзЗржоржи: `C:\my-project` ржмрж╛ `/home/user/app`).

### ржШ) tmpfs Mounts (рж╢рзБржзрзБржорж╛рждрзНрж░ Linux-ржП)
ржПржЯрж┐ ржбрзЗржЯрж╛ рж╣рзЛрж╕рзНржЯ ржмрж╛ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржбрж┐рж╕рзНржХрзЗ рж╕рзЗржн ржирж╛ ржХрж░рзЗ рж╕рж░рж╛рж╕рж░рж┐ рж╣рзЛрж╕рзНржЯ ржорзЗрж╢рж┐ржирзЗрж░ **RAM** ржмрж╛ ржорзЗржорзЛрж░рж┐рждрзЗ рж╕рзЗржн ржХрж░рзЗред ржХржирзНржЯрзЗржЗржирж╛рж░ рж╕рзНржЯржк рж╣рж▓рзЗ ржПржЗ ржбрзЗржЯрж╛ рж╣рж╛рж░рж╛рзЯред ржПржЯрж┐ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржмрж╛ рж╕рзЗржирж╕рж┐ржЯрж┐ржн ржбрзЗржЯрж╛ рж╕рж╛ржорзЯрж┐ржХржнрж╛ржмрзЗ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп ржЦрзБржм ржжрзНрж░рзБржд ржХрж╛ржЬ ржХрж░рзЗред

---

## рзй. Volume Drivers
ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ ржбржХрж╛рж░ `local` ржбрзНрж░рж╛ржЗржнрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред рждржмрзЗ ржмрзЬ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржбрзЗржЯрж╛ ржХрзНрж▓рж╛ржЙржб ржмрж╛ рж░рж┐ржорзЛржЯ рж╕рзНржЯрзЛрж░рзЗржЬрзЗ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп ржмрж┐ржнрж┐ржирзНржи ржбрзНрж░рж╛ржЗржнрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ:
- **Cloud Drivers:** AWS EBS, Azure File Storage, GCE Persistent Disk.
- **Network Drivers:** NFS, Samba/CIFS.
- **SSHFS:** SSH-ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЕржирзНржп рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рзНржЯрзЛрж░рзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред

---

## рзк. ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржнрж▓рж┐ржЙржо ржХржорж╛ржирзНржб (CLI)

| ржХрж╛ржЬ | ржХржорж╛ржирзНржб |
| :--- | :--- |
| Create Volume | `docker volume create my_vol` |
| List Volumes | `docker volume ls` |
| Inspect Volume | `docker volume inspect my_vol` |
| Remove Volume | `docker volume rm my_vol` |
| Remove Unused | `docker volume prune` |

---

## рзк. ржкрзНрж░рзНржпрж╛ржХржЯрж┐ржХрзНржпрж╛рж▓ ржмрзНржпржмрж╣рж╛рж░ ржЙржжрж╛рж╣рж░ржг

### Named Volume ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХржирзНржЯрзЗржЗржирж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ:
```bash
docker run -d --name mydb -v my_data:/var/lib/mysql mysql:latest
```
ржПржЦрж╛ржирзЗ `my_data` рж╣рж▓рзЛ ржПржХржЯрж┐ Named Volumeред

### Bind Mount ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржЪрж╛рж▓рзБ ржХрж░рж╛:
```bash
docker run -d --name myapp -v $(pwd):/app node:alpine
```
ржПржЦрж╛ржирзЗ ржмрж░рзНрждржорж╛ржи ржлрзЛрж▓рзНржбрж╛рж░ (`$(pwd)`) рж╕рж░рж╛рж╕рж░рж┐ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ `/app` ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржорж╛ржЙржирзНржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

---

## рзл. Bind Mount vs Named Volume

| ржлрж┐ржЪрж╛рж░ | Named Volume | Bind Mount |
| :--- | :--- | :--- |
| **ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ** | ржбржХрж╛рж░ ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗ | ржЗржЙржЬрж╛рж░ ржирж┐ржЬрзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗ |
| **ржкрзЛрж░рзНржЯрзЗржмрж┐рж▓рж┐ржЯрж┐** | ржЕржирзЗржХ ржмрзЗрж╢рж┐ | рж╣рзЛрж╕рзНржЯрзЗрж░ ржкрж╛рже-ржПрж░ ржУржкрж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНржЯ |
| **ржмрзНржпржмрж╣рж╛рж░** | ржкрзНрж░рзЛржбрж╛ржХрж╢ржи/ржбрж╛ржЯрж╛ржмрзЗрж╕ | рж▓рзЛржХрж╛рж▓ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ |

---

> [!IMPORTANT]
> ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржбрж╛ржЯрж╛ржмрзЗржЬрзЗрж░ ржЬржирзНржп рж╕ржмрж╕ржорзЯ **Named Volumes** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред ржЖрж░ ржХрзЛржб ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржХржирзНржЯрзЗржЗржирж╛рж░ рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рж╛рж░ ржЬржирзНржп **Bind Mounts** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
