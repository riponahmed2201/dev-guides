# Docker Security Basics ЁЯЫбя╕П

ржХржирзНржЯрзЗржЗржирж╛рж░рж╛ржЗржЬрзЗрж╢ржирзЗрж░ ржпрзБржЧрзЗ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ ржЕрждрзНржпржирзНржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред ржбржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ ржХрж┐ржЫрзБржЯрж╛ ржЖржЗрж╕рзЛрж▓рзЗржЯрзЗржб ржерж╛ржХрж▓рзЗржУ, ржкрзВрж░рзНржг ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ ржХрж┐ржЫрзБ ржмрзЗрж╕рж┐ржХ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржорзЗржЬрж╛рж░рж╕ (Security Measures) ржирзЗржУрзЯрж╛ ржкрзНрж░рзЯрзЛржЬржиред

---

## рзз. рж░рзБржЯ ржЗржЙржЬрж╛рж░ ржПрзЬрж┐рзЯрзЗ ржЪрж▓рж╛ (Run as Non-Root)

ржбржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ рж░рзБржЯ (Root) ржЗржЙржЬрж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ рж░рж╛ржи ржХрж░рзЗред ржпржжрж┐ ржХрзЛржирзЛ рж╣рзНржпрж╛ржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржирж┐рзЯржирзНрждрзНрж░ржг ржкрж╛рзЯ, рждржмрзЗ рж╕рзЗ ржкрзБрж░рзЛ рж╣рзЛрж╕рзНржЯ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржПржХрзНрж╕рзЗрж╕ ржкрзЗрзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

- **рж╕ржорж╛ржзрж╛ржи:** Dockerfile-ржП ржПржХржЯрж┐ ржиржи-рж░рзБржЯ ржЗржЙржЬрж╛рж░ рждрзИрж░рж┐ ржХрж░рзБржи ржПржмржВ рж╕рзЗржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред
```dockerfile
RUN addgroup -S appgroup && adduser -S appuser -G appgroup
USER appuser
```

---

## рзи. рж░рж┐ржб-ржЕржирж▓рж┐ ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржо (Read-Only File System)

ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ рж░рж╛ржиржЯрж╛ржЗржорзЗ ржпржжрж┐ ржлрж╛ржЗрж▓ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржХрж┐ржЫрзБ рж▓рзЗржЦрж╛рж░ ржкрзНрж░рзЯрзЛржЬржи ржирж╛ ржерж╛ржХрзЗ, рждржмрзЗ рж╕рзЗржЯрж┐ржХрзЗ рж░рж┐ржб-ржЕржирж▓рж┐ рж╣рж┐рж╕рзЗржмрзЗ рж╕рзЗржЯ ржХрж░рзЗ ржжрзЗржУрзЯрж╛ рж╕ржмржЪрзЗрзЯрзЗ ржирж┐рж░рж╛ржкржжред ржПрждрзЗ рж╣рзНржпрж╛ржХрж╛рж░рж░рж╛ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржнрзЗрждрж░рзЗ ржХрзЛржирзЛ ржХрзНрж╖рждрж┐ржХрж░ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ рж╕рзЗржн ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

```bash
docker run --read-only my-image
```

---

## рзй. ржХрзНржпрж╛ржкрж╛ржмрж┐рж▓рж┐ржЯрж┐ржЬ ржХржорж╛ржирзЛ (Drop Capabilities)

ржбржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░ржХрзЗ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ ржХрж┐ржЫрзБ рж▓рж┐ржирж╛ржХрзНрж╕ ржХрзНржпрж╛ржкрж╛ржмрж┐рж▓рж┐ржЯрж┐ржЬ (Capabilities) ржжрзЗржУрзЯрж╛ рж╣рзЯ ржпрж╛ рж╣рзЯрждрзЛ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзЗрж░ ржкрзНрж░рзЯрзЛржЬржи ржирзЗржЗред ржирж┐рж░рж╛ржкрждрзНрждрж╛рж░ ржЬржирзНржп ржЕржкрзНрж░рзЯрзЛржЬржирзАржпрж╝ рж╕ржм ржХрзНржпрж╛ржкрж╛ржмрж┐рж▓рж┐ржЯрж┐ржЬ ржбрзНрж░ржк ржХрж░рзЗ ржжрж┐ржиред

```bash
docker run --cap-drop=ALL --cap-add=NET_BIND_SERVICE my-image
```

---

## рзк. рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕рзНржХрзНржпрж╛ржирж┐ржВ (Security Scanning)

ржЗржорзЗржЬ рждрзИрж░рж┐ ржХрж░рж╛рж░ ржкрж░ рж╕рзЗржЯрж┐рждрзЗ ржХрзЛржирзЛ ржкрж░рж┐ржЪрж┐ржд рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╣рзЛрж▓ (Vulnerability) ржЖржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржирж┐рзЯржорж┐ржд рж╕рзНржХрзНржпрж╛ржи ржХрж░рзБржиред
- **Docker Scout:** ржбржХрж╛рж░рзЗрж░ ржирж┐ржЬрж╕рзНржм рж╕рзНржХрзНржпрж╛ржирж┐ржВ ржЯрзБрж▓ред
- **Trivy:** ржПржХржЯрж┐ ржЬржиржкрзНрж░рж┐рзЯ ржУржкрзЗржи рж╕рзЛрж░рзНрж╕ ржЗржорзЗржЬ рж╕рзНржХрзНржпрж╛ржирж╛рж░ред

```bash
docker scout cves my-image:latest
```

---

## рзл. ржбржХрж╛рж░ ржХржирзНржЯрзЗржирзНржЯ ржЯрзНрж░рж╛рж╕рзНржЯ (Docker Content Trust)

рж╕ржмрж╕ржорзЯ ржнрзЗрж░рж┐ржлрж╛ржЗржб ржПржмржВ ржЕржлрж┐рж╕рж┐рзЯрж╛рж▓ ржЗржорзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред `DOCKER_CONTENT_TRUST=1` рж╕рзЗржЯ ржХрж░рж▓рзЗ ржбржХрж╛рж░ рж╢рзБржзрзБржорж╛рждрзНрж░ ржбрж┐ржЬрж┐ржЯрж╛рж▓рж▓рж┐ рж╕рж╛ржЗржи ржХрж░рж╛ ржЗржорзЗржЬржЧрзБрж▓рзЛржЗ рж░рж╛ржи ржХрж░ржмрзЗред

---

## рзм. рж╕рж┐ржХрзНрж░рзЗржЯрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ (Secrets Management)

ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб, ржПржкрж┐ржЖржЗ ржХрж┐ (API Key) ржмрж╛ рж╕рзЗржирж╕рж┐ржЯрж┐ржн ржбрзЗржЯрж╛ ржХржЦржирзЛ Dockerfile-ржПрж░ `ENV` ржмрж╛ рж╕рзЛрж░рзНрж╕ ржХрзЛржбрзЗ рж░рж╛ржЦржмрзЗржи ржирж╛ред ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ ржбржХрж╛рж░ рж╕рж┐ржХрзНрж░рзЗржЯрж╕ (Docker Secrets) ржмрж╛ ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржлрж╛ржЗрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржпрж╛ рж░рж╛ржиржЯрж╛ржЗржорзЗ ржЗржиржЬрзЗржХрзНржЯ ржХрж░рж╛ рж╣рзЯред

---

## рзн. ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржЖржЗрж╕рзЛрж▓рзЗрж╢ржи (Network Isolation)

ржХржирзНржЯрзЗржЗржирж╛рж░ржЧрзБрж▓рзЛржХрзЗ ржбрж┐ржлрж▓рзНржЯ ржмрзНрж░рж┐ржЬ ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ ржирж╛ рж░рзЗржЦрзЗ ржХрж╛рж╕рзНржЯржо ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ рж░рж╛ржЦрзБржиред ржПрждрзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржХржирзНржЯрзЗржЗржирж╛рж░ ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛, ржпрж╛ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржмрж╛рзЬрж╛рзЯред

---

## рзо. рж░рж┐рж╕рзЛрж░рзНрж╕ рж▓рж┐ржорж┐ржЯ (Resource Limits)

ржПржХржЯрж┐ ржХржирзНржЯрзЗржЗржирж╛рж░ ржпрж╛рждрзЗ ржкрзБрж░рзЛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржорзЗржорж░рж┐ ржмрж╛ рж╕рж┐ржкрж┐ржЗржЙ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╣рзЛрж╕рзНржЯ рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗ ржбрж╛ржЙржи (DoS attack) ржирж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗ, рж╕рзЗржЬржирзНржп рж░рж┐рж╕рзЛрж░рзНрж╕ рж▓рж┐ржорж┐ржЯ рж╕рзЗржЯ ржХрж░рзБржиред

```bash
docker run --memory="512m" --cpus="1" my-image
```

---

## рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк (Summary)
рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржХрзЛржирзЛ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕рзНржЯрзЗржк ржирзЯ, ржПржЯрж┐ ржПржХржЯрж┐ ржХржирзНржЯрж┐ржирж┐ржЙржпрж╝рж╛рж╕ ржкрзНрж░рж╕рзЗрж╕ред ржЖржкржирж╛рж░ Docker-ржнрж┐рждрзНрждрж┐ржХ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ ржЙржкрж░рзЗрж░ ржзрж╛ржкржЧрзБрж▓рзЛ ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ ржЕржмрж╢рзНржпржЗ ржорзЗржирзЗ ржЪрж▓рзБржиред

---

> [!CAUTION]
> рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржЕржмрж╣рзЗрж▓рж╛ ржХрж░рж▓рзЗ ржЖржкржирж╛рж░ ржкрзБрж░рзЛ ржЗржиржлрзНрж░рж╛рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржЭрзБржБржХрж┐рж░ ржорзБржЦрзЗ ржкрзЬрждрзЗ ржкрж╛рж░рзЗред рж╕ржмрж╕ржорзЯ "Principle of Least Privilege" ржорзЗржирзЗ ржЪрж▓рзБржиред
