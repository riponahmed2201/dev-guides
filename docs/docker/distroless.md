# Distroless Images ЁЯЫбя╕П

рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐рж░ ржжрж┐ржХ ржерзЗржХрзЗ ржбржХрж╛рж░ ржЗржорзЗржЬржХрзЗ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржХрж░рж╛рж░ ржЬржирзНржп **Distroless Images** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржПржЯрж┐ ржЧрзБржЧрж▓ (Google) ржХрж░рзНрждрзГржХ рж╢рзБрж░рзБ рж╣ржУрзЯрж╛ ржПржХржЯрж┐ ржУржкрзЗржи рж╕рзЛрж░рзНрж╕ ржкрзНрж░ржЬрзЗржХрзНржЯред

---

## рзз. Distroless Image ржХрж┐?

Distroless ржЗржорзЗржЬ рж╣рж▓рзЛ ржПржоржи ржПржХ ржзрж░ржирзЗрж░ ржЗржорзЗржЬ ржпрж╛рждрзЗ ржПржХржЯрж┐ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп рж╢рзБржзрзБржорж╛рждрзНрж░ ржУржЗ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржлрж╛ржЗрж▓ ржПржмржВ рждрж╛рж░ ржкрзНрж░рзЯрзЛржЬржирзАрзЯ рж░рж╛ржиржЯрж╛ржЗржо ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ (ржпрзЗржоржи: libc, SSL certificates) ржерж╛ржХрзЗред 

ржПрждрзЗ ржХрзЛржирзЛ:
- рж╢рзЗрж▓ (Shell/bash/sh) ржерж╛ржХрзЗ ржирж╛ред
- ржкрзНржпрж╛ржХрзЗржЬ ржорзНржпрж╛ржирзЗржЬрж╛рж░ (apt, apk) ржерж╛ржХрзЗ ржирж╛ред
- рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб рж▓рж┐ржирж╛ржХрзНрж╕ ржЗржЙржЯрж┐рж▓рж┐ржЯрж┐ (ls, cd, mkdir) ржерж╛ржХрзЗ ржирж╛ред

---

## рзи. ржХрзЗржи Distroless ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи? (Benefits)

1. **Minimal Attack Surface:** рж╣рзНржпрж╛ржХрж╛рж░рж░рж╛ рж╕рж╛ржзрж╛рж░ржгржд рж╢рзЗрж▓ ржмрж╛ ржкрзНржпрж╛ржХрзЗржЬ ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗ ржЕрзНржпрж╛ржЯрж╛ржХ ржХрж░рзЗред ржпрзЗрж╣рзЗрждрзБ ржПрждрзЗ ржПржЧрзБрж▓рзЛ ржирзЗржЗ, рждрж╛ржЗ ржЕрзНржпрж╛ржЯрж╛ржХ ржХрж░рж╛ ржкрзНрж░рж╛рзЯ ржЕрж╕ржорзНржнржмред
2. **Reduced Image Size:** ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ рж╕ржм ржлрж╛ржЗрж▓ ржмрж╛ржж ржжрзЗржУрзЯрж╛рзЯ ржПржЧрзБрж▓рзЛ ржЕрждрзНржпржирзНржд ржЫрзЛржЯ рж╕рж╛ржЗржЬрзЗрж░ рж╣рзЯред
3. **Better Compliance:** рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржЕржбрж┐ржЯрзЗ ржПржЧрзБрж▓рзЛ ржЦрзБржм рж╕рж╣ржЬрзЗржЗ ржЯрж┐ржХрзЗ ржпрж╛рзЯ ржХрж╛рж░ржг ржПрждрзЗ ржХрзЛржирзЛ рж╕рж┐ржнрж┐рзЯрзНржпрж╛рж░рзНржЯрж┐ (CVE) ржерж╛ржХрзЗ ржирж╛ ржмрж▓рж▓рзЗржЗ ржЪрж▓рзЗред

---

## рзй. ржорж╛рж▓рзНржЯрж┐-рж╕рзНржЯрзЗржЬ ржмрж┐рж▓рзНржбрзЗрж░ рж╕рж╛ржерзЗ ржмрзНржпржмрж╣рж╛рж░ (Usage)

Distroless ржЗржорзЗржЬрзЗ ржпрзЗрж╣рзЗрждрзБ ржХрзЛржирзЛ ржкрзНржпрж╛ржХрзЗржЬ ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржирзЗржЗ, рждрж╛ржЗ ржЖржкржирж┐ ржПрждрзЗ ржирждрзБржи ржХрж┐ржЫрзБ ржЗржирзНрж╕ржЯрж▓ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ред ржЖржкржирж╛ржХрзЗ ржЕржмрж╢рзНржпржЗ **Multi-stage build** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗред

```dockerfile
# Stage 1: Build stage
FROM node:18 AS builder
WORKDIR /app
COPY . .
RUN npm install && npm run build

# Stage 2: Final stage
FROM gcr.io/distroless/nodejs18-debian11
WORKDIR /app
COPY --from=builder /app .
CMD ["index.js"]
```

---

## рзк. ржбрж┐ржмрж╛ржЧрж┐ржВ ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬ (Debugging Challenges)

Distroless ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЬ рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЛ ржбрж┐ржмрж╛ржЧрж┐ржВред ржпрзЗрж╣рзЗрждрзБ ржПрждрзЗ `bash` ржмрж╛ `sh` ржирзЗржЗ, рждрж╛ржЗ ржЖржкржирж┐ `docker exec` ржХрж░рзЗ ржХржирзНржЯрзЗржЗржирж╛рж░рзЗрж░ ржнрзЗрждрж░рзЗ ржврзБржХрждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ред

- **рж╕ржорж╛ржзрж╛ржи:** ржбржХрж╛рж░ ржЗржорзЗржЬрзЗрж░ ржПржХржЯрж┐ **debug** ржнрж╛рж░рзНрж╕ржи ржерж╛ржХрзЗ (ржпрзЗржоржи: `gcr.io/distroless/nodejs18-debian11:debug`), ржпрзЗржЯрж╛рждрзЗ ржПржХржЯрж┐ ржмрзНржпрж╕рзНрждржмржХрзНрж╕ (BusyBox) рж╢рзЗрж▓ ржерж╛ржХрзЗред рж╢рзБржзрзБржорж╛рждрзНрж░ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржмрж╛ ржЯрзЗрж╕рзНржЯрж┐ржВрзЯрзЗрж░ рж╕ржорзЯ ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЙржЪрж┐рждред

---

## рзл. ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржХрзНрж╖рзЗрждрзНрж░ (Use Cases)

- ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯрзЗ ржпрзЗржЦрж╛ржирзЗ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред
- ржЬрж╛ржнрж╛ (Java), ржкрж╛ржЗржержи (Python), ржирзЛржб (Node.js) ржмрж╛ ржЧрзЛ (Go) ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржЬржирзНржпред
- ржорж╛ржЗржХрзНрж░рзЛрж╕рж╛рж░рзНржнрж┐рж╕ ржпрзЗржЦрж╛ржирзЗ ржЗржорзЗржЬ рж╕рж╛ржЗржЬ ржПржмржВ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж╣рж╛рж░рзНржбрзЗржирж┐ржВ ржкрзНрж░рзЯрзЛржЬржиред

---

## рзм. ржЬржиржкрзНрж░рж┐рзЯ ржХрж┐ржЫрзБ Distroless ржЗржорзЗржЬ

ржЧрзБржЧрж▓ ржХржирзНржЯрзЗржЗржирж╛рж░ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рж┐рждрзЗ (gcr.io) ржмрж┐ржнрж┐ржирзНржи рж▓рзНржпрж╛ржЩрзНржЧрзБрзЯрзЗржЬрзЗрж░ ржЬржирзНржп ржЗржорзЗржЬ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ:
- `gcr.io/distroless/static` (Go/Rust ржмрж╛ржЗржирж╛рж░рж┐рж░ ржЬржирзНржп)
- `gcr.io/distroless/java17`
- `gcr.io/distroless/nodejs18-debian11`
- `gcr.io/distroless/python3`

---

## рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк (Summary)
ржЖржкржирж┐ ржпржжрж┐ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржЬржирзНржп рж╕рж░рзНржмрзЛржЪрзНржЪ рж▓рзЗржнрзЗрж▓рзЗрж░ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржЪрж╛ржи, рждржмрзЗ Distroless рж╣рж▓рзЛ рж╕рзЗрж░рж╛ ржЪрзЯрзЗрж╕ред ржпржжрж┐ржУ рж╢рзБрж░рзБрждрзЗ ржбрж┐ржмрж╛ржЧрж┐ржВ ржПржХржЯрзБ ржХржарж┐ржи ржоржирзЗ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржХрж┐ржирзНрждрзБ ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ ржПрж░ рж╕рзБржлрж▓ ржЕржирзЗржХред

---

> [!IMPORTANT]
> ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржбрж┐ржкрзНрж▓рзЯржорзЗржирзНржЯрзЗрж░ рж╕ржорзЯ рж╕ржмрж╕ржорзЯ Distroless ржЗржорзЗржЬ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржХржерж╛ ржЪрж┐ржирзНрждрж╛ ржХрж░рзБржи ржпржжрж┐ ржЖржкржирж╛рж░ ржЯрж┐ржорзЗрж░ рждрж╛рждрзЗ ржХрж╛ржЬ ржХрж░рж╛рж░ ржжржХрзНрж╖рждрж╛ ржерж╛ржХрзЗред
