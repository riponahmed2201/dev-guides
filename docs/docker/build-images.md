# Building Docker Images: ржЗржорзЗржЬ рждрзИрж░рж┐рж░ ржХрж▓рж╛ржХрзМрж╢рж▓ ЁЯЫая╕П

Dockerfile рж▓рзЗржЦрж╛рж░ ржкрж░ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЬ рж╣рж▓рзЛ рж╕рзЗржЗ ржлрж╛ржЗрж▓ржЯрж┐ржХрзЗ ржПржХржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржп ржЗржорзЗржЬрзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рж╛ред ржПрж░ ржЬржирзНржп ржЖржорж░рж╛ `docker build` ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред ржПржЗ ржЧрж╛ржЗржбрзЗ ржЖржорж░рж╛ ржмрж┐рж▓рзНржб ржкрзНрж░рж╕рзЗрж╕рзЗрж░ ржмрж┐ржнрж┐ржирзНржи ржлрзНрж▓рзНржпрж╛ржЧ ржПржмржВ ржЗржорзЗржЬ ржЯрзНржпрж╛ржЧрж┐ржВ рж╕ржорзНржкрж░рзНржХрзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржиржмрзЛред

---

## рзз. ржмрзЗрж╕рж┐ржХ ржмрж┐рж▓рзНржб ржХржорж╛ржирзНржб

рж╕ржмржЪрзЗрзЯрзЗ рж╕рж╣ржЬ ржмрж┐рж▓рзНржб ржХржорж╛ржирзНржб рж╣рж▓рзЛ:

```bash
docker build -t myapp:v1 .
```

- `-t` (Tag): ржЗржорзЗржЬрзЗрж░ ржПржХржЯрж┐ ржирж╛ржо ржПржмржВ ржнрж╛рж░рзНрж╕ржи (ржЯрзНржпрж╛ржЧ) ржжрзЗржУрзЯрж╛рж░ ржЬржирзНржпред
- `.` (Dot): ржПржЯрж┐ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ ржпрзЗ Dockerfile ржПржмржВ ржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ ржмрж░рзНрждржорж╛ржи ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ ржЖржЫрзЗред

---

## рзи. ржХрж╛рж╕рзНржЯржо Dockerfile ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛

ржпржжрж┐ ржЖржкржирж╛рж░ ржлрж╛ржЗрж▓ржЯрж┐рж░ ржирж╛ржо ржбрж┐ржлрж▓рзНржЯ `Dockerfile` ржирж╛ рж╣рзЯрзЗ ржЕржирзНржп ржХрж┐ржЫрзБ рж╣рзЯ (ржпрзЗржоржи: `Dockerfile.prod`), рждржмрзЗ `-f` ржлрзНрж▓рзНржпрж╛ржЧ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣рзЯ:

```bash
docker build -t myapp:v1 -f Dockerfile.prod .
```

ржПржЯрж┐ рж╕рж╛ржзрж╛рж░ржгржд ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржПржмржВ ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ ржЖрж▓рж╛ржжрж╛ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред

---

## рзй. Force Rebuild (No-cache)

ржбржХрж╛рж░ рж╕рж╛ржзрж╛рж░ржгржд ржЖржЧрзЗрж░ ржмрж┐рж▓рзНржбрзЗрж░ рж▓рзЗржпрж╝рж╛рж░ржЧрзБрж▓рзЛ ржХрзНржпрж╛рж╢ (Cache) ржерзЗржХрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржпрж╛рждрзЗ ржмрж┐рж▓рзНржб ржжрзНрж░рзБржд рж╣рзЯред ржХрж┐ржирзНрждрзБ ржХржЦржирзЛ ржХржЦржирзЛ ржЖржкржирж┐ ржПржХржжржо рж╢рзБрж░рзБ ржерзЗржХрзЗ ржлрзНрж░рзЗрж╢ ржмрж┐рж▓рзНржб ржХрж░рждрзЗ ржЪрж╛ржи (ржпрзЗржоржи: ржпржжрж┐ ржХрзЛржирзЛ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржкрзНржпрж╛ржЪ ржЗржирзНрж╕ржЯрж▓ ржХрж░рждрзЗ рж╣рзЯ)ред рждржЦржи `--no-cache` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи:

```bash
docker build --no-cache -t myapp:v1 .
```

---

## рзк. ржмрж┐рж▓рзНржб-ржЯрж╛ржЗржо ржнрзЗрж░рж┐рзЯрзЗржмрж▓ (Build Arguments)

Dockerfile-ржП ржерж╛ржХрж╛ `ARG` ржЗржирзНрж╕ржЯрзНрж░рж╛ржХрж╢ржирзЗрж░ ржнрзНржпрж╛рж▓рзБ ржмрж┐рж▓рзНржб ржХрж░рж╛рж░ рж╕ржорзЯ ржмрж╛ржЗрж░рзЗ ржерзЗржХрзЗ ржкрж╛рж╕ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ `--build-arg` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ:

```bash
docker build --build-arg VERSION=2.0 -t myapp:v1 .
```

ржПржЯрж┐ ржЗржорзЗржЬржХрзЗ ржбрж╛ржЗржирж╛ржорж┐ржХ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред

---

## рзл. ржЗржорзЗржЬ ржЯрзНржпрж╛ржЧрж┐ржВ (Docker Tag)

ржПржХржЯрж┐ рждрзИрж░рж┐ ржХрж░рж╛ ржЗржорзЗржЬржХрзЗ ржирждрзБржи ржирж╛ржо ржмрж╛ ржЯрзНржпрж╛ржЧ ржжрж┐рждрзЗ `docker tag` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржПржЯрж┐ рж╕рж╛ржзрж╛рж░ржгржд ржЗржорзЗржЬ ржкрзБрж╢ ржХрж░рж╛рж░ ржЖржЧрзЗ ржкрзНрж░рзЯрзЛржЬржи рж╣рзЯред

```bash
docker tag myapp:v1 myapp:latest
```

ржПржЦрж╛ржирзЗ `myapp:v1`-ржХрзЗ ржирждрзБржи ржирж╛ржо `myapp:latest` ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗред ржПржЯрж┐ ржирждрзБржи ржХрзЛржирзЛ ржХржкрж┐ рждрзИрж░рж┐ ржХрж░рзЗ ржирж╛, ржмрж░ржВ ржПржХржЗ ржЗржорзЗржЬрзЗрж░ ржПржХржЯрж┐ ржирждрзБржи рж▓рзЗржмрзЗрж▓ ржпрзЛржЧ ржХрж░рзЗред

---

## ржмрж┐рж▓рзНржб ржХржорж╛ржирзНржб рж╕рж╛ржорж╛рж░рж┐ ржЯрзЗржмрж┐рж▓

| Task         | Command                                      |
| :----------- | :------------------------------------------- |
| Simple Build | `docker build -t name .`                     |
| Custom File  | `docker build -f <file> -t name .`           |
| Skip Cache   | `docker build --no-cache -t name .`          |
| Build Args   | `docker build --build-arg KEY=VAL -t name .` |
| Tag Image    | `docker tag source target`                   |

---

> [!IMPORTANT]
> ржмрж┐рж▓рзНржб ржХрж░рж╛рж░ рж╕ржорзЯ рж╕ржмрж╕ржорзЯ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржмрзЗржи ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржлрж╛ржЗрж▓ `.dockerignore`-ржП рж░рж╛ржЦрждрзЗ, ржпрж╛рждрзЗ ржмрж┐рж▓рзНржб ржХржирзНржЯрзЗржХрзНрж╕ржЯ ржЫрзЛржЯ ржерж╛ржХрзЗ ржПржмржВ ржмрж┐рж▓рзНржб ржжрзНрж░рзБржд рж╣рзЯред
